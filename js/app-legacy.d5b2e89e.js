(function(t){function e(e){for(var n,r,c=e[0],s=e[1],l=e[2],d=0,p=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,c=1;c<a.length;c++){var s=a[c];0!==o[s]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},i=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"0751":function(t,e,a){"use strict";var n=a("48f3"),o=a.n(n);o.a},"07be":function(t,e,a){"use strict";var n=a("bfd3"),o=a.n(n);o.a},"0b63":function(t,e,a){"use strict";var n=a("5080"),o=a.n(n);o.a},"1bed":function(t,e,a){"use strict";var n=a("2575"),o=a.n(n);o.a},2575:function(t,e,a){},"31aa":function(t,e,a){},3638:function(t,e,a){},"48f0":function(t,e,a){},"48f3":function(t,e,a){},5080:function(t,e,a){},"5c0b":function(t,e,a){"use strict";var n=a("9c0c"),o=a.n(n);o.a},8271:function(t,e,a){},"8b6e":function(t,e,a){},9222:function(t,e,a){"use strict";var n=a("fadf"),o=a.n(n);o.a},9769:function(t,e,a){"use strict";var n=a("48f0"),o=a.n(n);o.a},"979a":function(t,e,a){"use strict";var n=a("8b6e"),o=a.n(n);o.a},"9a5d":function(t,e,a){},"9c0c":function(t,e,a){},"9e22":function(t,e,a){"use strict";var n=a("f3de"),o=a.n(n);o.a},"9ec1":function(t,e,a){"use strict";var n=a("9a5d"),o=a.n(n);o.a},"9fd7":function(t,e,a){},a18b:function(t,e,a){},ab82:function(t,e,a){"use strict";var n=a("e556"),o=a.n(n);o.a},ac62:function(t,e,a){},b4fe:function(t,e,a){"use strict";var n=a("a18b"),o=a.n(n);o.a},bf51:function(t,e,a){"use strict";var n=a("9fd7"),o=a.n(n);o.a},bfd3:function(t,e,a){},c276:function(t,e,a){},c5d3:function(t,e,a){"use strict";var n=a("d10d"),o=a.n(n);o.a},ca0d:function(t,e,a){"use strict";var n=a("3638"),o=a.n(n);o.a},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n,o,i=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{directives:[{name:"show",rawName:"v-show",value:t.appState.isInitialState||t.appState.isEditFactoryMode&&t.$vuetify.breakpoint.mdAndUp,expression:"appState.isInitialState || (appState.isEditFactoryMode && $vuetify.breakpoint.mdAndUp)"}],attrs:{app:"",color:"primary",dark:"","clipped-right":""}},[a("v-btn",{staticClass:"d-sm-none",staticStyle:{visibility:"hidden"},attrs:{icon:""}},[a("v-icon",[t._v("mdi-temp")])],1),a("v-spacer",{staticClass:"d-sm-none"}),a("v-toolbar-title",[t._v("農地工廠回報")]),a("v-spacer"),a("div",{staticClass:"d-none d-sm-flex"},[a("v-btn",{attrs:{text:""},on:{click:t.modalActions.openTutorialModal}},[t._v(" 使用教學 ")]),a("v-btn",{attrs:{text:""},on:{click:t.modalActions.openSafetyModal}},[t._v(" 安全須知 ")]),a("v-btn",{attrs:{text:""},on:{click:t.modalActions.openContactModal}},[t._v(" 聯絡我們 ")]),a("v-btn",{attrs:{text:"",href:"https://about.disfactory.tw/#section-f_c360c8de-447e-4c0a-a856-4af18b9a5240"}},[t._v(" 常見問題 ")]),a("v-btn",{attrs:{text:"",href:"https://about.disfactory.tw",target:"_blank"}},[t._v(" 關於舉報系統 ")]),a("v-btn",{attrs:{text:"",href:"https://airtable.com/shrUraKakZRpH52DO",target:"_blank"}},[t._v(" 問題回報 ")])],1),a("v-app-bar-nav-icon",{staticClass:"d-flex d-sm-none",on:{click:function(e){t.drawer=!t.drawer}}})],1),a("v-navigation-drawer",{staticClass:"app-sidebar",attrs:{app:"",right:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{"active-class":"deep-purple--text text--accent-4"}},[a("v-list-item",{on:{click:t.modalActions.openTutorialModal}},[a("v-list-item-title",[t._v("使用教學")])],1),a("v-list-item",{on:{click:t.modalActions.openSafetyModal}},[a("v-list-item-title",[t._v("安全須知")])],1),a("v-list-item",{on:{click:t.modalActions.openContactModal}},[a("v-list-item-title",[t._v("聯絡我們")])],1),a("v-list-item",{attrs:{href:"https://about.disfactory.tw/#section-f_c360c8de-447e-4c0a-a856-4af18b9a5240",target:"_blank"}},[a("v-list-item-title",[t._v("常見問題")])],1),a("v-list-item",{attrs:{href:"https://about.disfactory.tw",target:"_blank"}},[a("v-list-item-title",[t._v("關於舉報系統")])],1),a("v-list-item",{attrs:{href:"https://airtable.com/shrUraKakZRpH52DO",target:"_blank"}},[a("v-list-item-title",[t._v("問題回報")])],1)],1)],1)],1),a("v-main",{staticStyle:{"max-height":"100%",height:"100%"}},[a("app-alert",{attrs:{alert:t.alertState.alert,dismiss:t.alertActions.dismissAlert}}),a("v-dialog",{attrs:{"max-width":"305"},model:{value:t.modalState.createFactorySuccessModal,callback:function(e){t.$set(t.modalState,"createFactorySuccessModal",e)},expression:"modalState.createFactorySuccessModal"}},[a("v-card",{staticClass:"text-center pt-5"},[a("v-icon",{staticStyle:{"font-size":"80px"},attrs:{color:"primary"}},[t._v(" mdi-checkbox-marked-circle ")]),a("v-card-title",{staticClass:"secondary--text justify-center"},[t._v(" 新增可疑工廠成功 ")]),a("v-card-text",[a("small",[t._v(" 3 秒後自動關閉提示訊息 ")])])],1)],1),a("v-dialog",{attrs:{"max-width":"305"},model:{value:t.modalState.updateFactoryImageSuccessModal,callback:function(e){t.$set(t.modalState,"updateFactoryImageSuccessModal",e)},expression:"modalState.updateFactoryImageSuccessModal"}},[a("v-card",{staticClass:"text-center pt-5"},[a("v-icon",{staticStyle:{"font-size":"80px"},attrs:{color:"primary"}},[t._v(" mdi-checkbox-marked-circle ")]),a("v-card-title",{staticClass:"secondary--text justify-center"},[t._v(" 補充工廠照片成功 ")]),a("v-card-text",[a("small",[t._v(" 3 秒後自動關閉提示訊息 ")])])],1)],1),a("v-dialog",{attrs:{"max-width":"305"},model:{value:t.modalState.updateFactorySuccessModal,callback:function(e){t.$set(t.modalState,"updateFactorySuccessModal",e)},expression:"modalState.updateFactorySuccessModal"}},[a("v-card",{staticClass:"text-center pt-5"},[a("v-icon",{staticStyle:{"font-size":"80px"},attrs:{color:"primary"}},[t._v(" mdi-checkbox-marked-circle ")]),a("v-card-title",{staticClass:"secondary--text justify-center"},[t._v(" 補充工廠資訊成功 ")]),a("v-card-text",[a("small",[t._v(" 3 秒後自動關閉提示訊息 ")])])],1)],1),a("about-modal",{attrs:{open:t.modalState.aboutModalOpen,dismiss:t.modalActions.closeAboutModal}}),a("contact-modal",{attrs:{open:t.modalState.contactModalOpen,dismiss:t.modalActions.closeContactModal}}),a("getting-started-modal",{attrs:{open:t.modalState.gettingStartedModalOpen,dismiss:t.modalActions.closeGettingStartedModal}}),a("safety-modal",{model:{value:t.modalState.safetyModalOpen,callback:function(e){t.$set(t.modalState,"safetyModalOpen",e)},expression:"modalState.safetyModalOpen"}}),a("tutorial-modal",{attrs:{open:t.modalState.tutorialModalOpen,dismiss:t.modalActions.closeTutorialModal}}),a("ios-version-modal",{attrs:{open:t.modalState.supportIOSVersionModalOpen,dismiss:t.modalActions.closesupportIOSVersionModal}}),a("Map",{attrs:{setFactoryLocation:t.appActions.setFactoryLocation}}),t.appState.isCreateMode?a("create-factory-steps"):t._e(),t.appState.isEditMode?a("update-factory-steps"):t._e()],1),a("factory-detail-page")],1)},c=[],s=a("e587"),l=a("750b"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-container"},[a("div",{ref:"root",staticClass:"map"}),t.appState.isInitialPage?a("div",{staticClass:"container-fluid px-1 pt-7 pb-4 filter-buttons-container",class:{desktop:t.$vuetify.breakpoint.mdAndUp,"sidebar-expanded":t.appState.factoryDetailsExpanded}},[a("display-setting-bottom-sheet"),t._l(t.filterButtonsData,(function(e){return a("v-btn",{key:e.value,staticClass:"mx-2 mb-5 primary--text",class:{"v-btn--active":t.checkActive(e.value)},attrs:{rounded:"",color:"white"},on:{click:function(a){return t.onClickFilterButton(e.value)}}},[a("v-icon",{attrs:{color:e.color}},[t._v("mdi-map-marker")]),t._v(" "+t._s(e.text)+" ")],1)}))],2):t._e(),a("div",{staticClass:"ol-fit-location ol-unselectable ol-control",attrs:{"data-label":"map-locate"},on:{click:t.zoomToGeolocation}},[t._m(0)]),t.appState.selectFactoryMode&&!t.locationTooltipVisibility?a("div",{staticClass:"center-point"}):t._e(),t.appState.selectFactoryMode?t._e():a("div",{staticClass:"factory-button-group flex justify-center mb-5 mb-8-md"},[a("v-btn",{attrs:{color:"primary",rounded:"",large:""},on:{click:t.onClickCreateFactoryButton}},[t._v(" 我想新增可疑工廠 ")])],1)])},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",[a("img",{attrs:{src:"/images/locate.svg",alt:"locate"}})])}],p=(a("99af"),a("4de4"),a("caad"),a("d81d"),a("2532"),a("284c")),v=(a("96cf"),a("9ab4")),m=function(){var t,e=this,a=e.$createElement,n=e._self._c||a;return n("button",{class:Object.assign({},{outline:e.outline,disabled:e.disabled,rect:e.rect,small:e.small,auto:e.auto},(t={},t[e.color]=!0,t)),on:{click:e.click}},[e._t("default")],2)},f=[],b=Object(l["b"])({name:"AppButton",props:{outline:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rect:{type:Boolean,default:!1},color:{type:String,default:"default"},small:{type:Boolean,default:!1},auto:{type:Boolean,default:!1}},setup:function(t,e){var a=function(){t.disabled||e.emit("click")};return{click:a}}}),g=b,y=(a("bf51"),a("2877")),h=Object(y["a"])(g,m,f,!1,null,"a2769d84",null),_=h.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{class:{dark:t.dark,fixed:t.fixed,hide:t.hide}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.dark,expression:"!dark"}],staticClass:"back-button",attrs:{"data-label":"navbar-back"},on:{click:function(e){return t.onBackClick()}}},[a("span"),a("span"),a("span")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dark,expression:"dark"}],staticClass:"back-placeholder"}),t._t("default"),a("div",{staticClass:"menu-button",attrs:{"data-label":"navbar-menu"},on:{click:function(e){return t.onMenuClick()}}},[a("span"),a("span"),a("span")])],2)},w=[],x=Object(l["b"])({name:"AppNavbar",props:{dark:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},back:{type:Function},hide:{type:Boolean,default:!1}},setup:function(t,e){var a=e.emit;return{onBackClick:function(){a("back")},onMenuClick:function(){a("menu")}}}}),C=x,O=(a("ab82"),Object(y["a"])(C,S,w,!1,null,"f5670a18",null)),k=O.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"checkbox"===t.type?a("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],class:{small:t.small},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.inputValue)?t._i(t.inputValue,null)>-1:t.inputValue},on:{change:function(e){var a=t.inputValue,n=e.target,o=!!n.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);n.checked?r<0&&(t.inputValue=a.concat([i])):r>-1&&(t.inputValue=a.slice(0,r).concat(a.slice(r+1)))}else t.inputValue=o}}},"input",t.$attrs,!1)):"radio"===t.type?a("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],class:{small:t.small},attrs:{type:"radio"},domProps:{checked:t._q(t.inputValue,null)},on:{change:function(e){t.inputValue=null}}},"input",t.$attrs,!1)):a("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],class:{small:t.small},attrs:{type:t.type},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}},"input",t.$attrs,!1))},F=[],I=Object(l["b"])({name:"AppTextField",props:{type:{type:String,default:"text"},value:{type:String,required:!0},small:{type:Boolean,default:!1}},setup:function(t,e){var a=Object(l["a"])({get:function(){return t.value},set:function(t){return e.emit("input",t)}});return{inputValue:a}}}),A=I,M=(a("e405"),Object(y["a"])(A,j,F,!1,null,"e9035d54",null)),E=M.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-bottom-sheet",{scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mx-2 mb-5 primary--text",attrs:{rounded:"",color:"white"}},"v-btn",o,!1),n),[t._v(" 顯示設定 ")])]}}]),model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[a("v-list",[a("v-subheader",[t._v("地圖顯示設定")]),a("v-list-item",[a("h2",{staticClass:"primary--text text-button"},[t._v("農地範圍 •")]),a("v-btn",{staticClass:"primary--text",class:t.isLUIMapVisable?"font-weight-light":"font-weight-bold",attrs:{text:"","x-small":""},on:{click:function(e){t.isLUIMapVisable=!1}}},[t._v("隱藏")]),a("v-btn",{staticClass:"primary--text",class:t.isLUIMapVisable?"font-weight-bold":"font-weight-light",attrs:{text:"","x-small":""},on:{click:function(e){t.isLUIMapVisable=!0}}},[t._v("顯示")])],1),a("v-list-item",[a("switch-map-mode-button",{attrs:{isInSheet:!0}})],1)],1)],1)},L=[],D=(a("a4d3"),a("e01a"),a("d3b7"),Symbol("MAIN_MAP_CONTROLLER")),V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-bottom-sheet",{scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"primary--text",class:t.isInSheet?"pa-0":null,attrs:{rounded:!t.isInSheet,text:t.isInSheet,color:"white"}},"v-btn",o,!1),n),[t._v(" 切換地圖模式 • "+t._s(t.currentMapModeName)+" ")])]}}]),model:{value:t.mapModeBottomSheet,callback:function(e){t.mapModeBottomSheet=e},expression:"mapModeBottomSheet"}},[a("v-list",[a("v-subheader",[t._v("切換地圖模式")]),t._l(t.mapModes,(function(e){return a("v-list-item",{key:e.type,on:{click:function(a){t.currentMapMode=e.type}}},[a("v-list-item-title",{staticClass:"primary--text"},[t._v(t._s(e.name))])],1)}))],2)],1)},U=[],P=(a("7db0"),a("b0c0"),a("4160"),a("13d5"),a("4ec9"),a("a9e3"),a("9129"),a("4fad"),a("3ca3"),a("159b"),a("ddb0"),a("9f12")),B=a("53fe"),R=a("2fa7"),G=a("4cdf"),N=a("a2c7"),$=a("5eee"),z=a("6c77"),Y=a("6cbf"),Z=a("ce2c"),H=a("83a6"),q=a("8682"),W=a("82b0"),J=a("f403"),X=a("d510"),K=a("6ed8"),Q=a("256f"),tt=a("0af5"),et=a("3e6b"),at=a("480c"),nt=a("5831"),ot=a("d0e9"),it=a("e29f"),rt=a("9d47"),ct=a("a7f7"),st=a("f53f"),lt=a("3a39"),ut=a("508e"),dt=[{value:"2-1",text:"金屬: 沖床、銑床、車床、鏜孔"},{value:"2-2",text:"金屬: 焊接、鑄造、熱處理"},{value:"2-3",text:"金屬: 金屬表面處理、噴漆"},{value:"3",text:"塑膠加工、射出"},{value:"4",text:"橡膠加工"},{value:"5",text:"非金屬礦物（石材）"},{value:"6",text:"食品"},{value:"7",text:"皮革"},{value:"8",text:"紡織"},{value:"9",text:"其他"}],pt=["default",0,1,2,3,4,5,6,7],vt=[{type:"default",name:"疑似工廠",color:"#D27E00"},{type:0,name:"已檢舉",color:"#697F01"},{type:1,name:"已排程稽查",color:"#C8D48D"},{type:2,name:"陳述意見期",color:"#457287"},{type:3,name:"已勒令停工",color:"#E59B9B"},{type:4,name:"已發函斷電",color:"#CF5E5D"},{type:5,name:"已排程拆除",color:"#A22A29"},{type:6,name:"已拆除",color:"#364516"},{type:7,name:"不再追蹤",color:"#A1A1A1"}],mt=vt.reduce((function(t,e){return Object.assign(Object.assign({},t),Object(R["a"])({},e.type,e))}),{}),ft=function(t){return mt[t].name},bt=function(t){return mt[t].color},gt=(a("a630"),a("fb6a"),a("45fc"),window.OffscreenCanvas?new OffscreenCanvas(500,500):document.createElement("canvas")),yt=gt.getContext("2d"),ht=function(t){return function(e){return new Promise((function(a){var n=new Image;n.crossOrigin="",n.src=e,n.style.display="none",n.onload=function(){return Object(v["a"])(void 0,void 0,void 0,regeneratorRuntime.mark((function e(){var o,i,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return gt.width=n.width,gt.height=n.height,yt.clearRect(0,0,gt.width,gt.height),yt.drawImage(n,0,0),o=yt.getImageData(0,0,n.width,n.height),i=o.data,e.next=8,Promise.resolve(t(i));case 8:r=document.createElement("canvas"),c=r.getContext("2d"),r.width=n.width,r.height=n.height,c.putImageData(o,0,0),a(r.toDataURL()),n.remove(),r.remove();case 16:case"end":return e.stop()}}),e)})))}}))}},_t=(ht((function(t){for(var e=0;e<t.length;e+=4){var a=(t[e]+t[e+1]+t[e+2])/3;t[e]=a,t[e+1]=a,t[e+2]=a}})),[[255,241,0]]),St=function(t,e){return!t.some((function(t,a){return e[a]!==t}))},wt=function(t){return _t.some((function(e){return St(e,t)}))},xt=ht((function(t){for(var e=0;e<t.length;e+=4){var a=Array.from(t.slice(e,e+3));wt(a)?(t[e]=0,t[e+1]=0,t[e+2]=0,t[e+3]=1):(t[e]=0,t[e+1]=0,t[e+2]=0,t[e+3]=255)}})),Ct=a("d202"),Ot=function(t){return"/images/marker-".concat(t,".svg")},kt=function(t){var e;return null===(e=vt.find((function(e){return e.type===t})))||void 0===e?void 0:e.color};function jt(t){var e;return t.document_display_status?null===(e=vt.find((function(e){return e.name===t.document_display_status})))||void 0===e?void 0:e.type:vt[0].type}(function(t){t[t["OSM"]=0]="OSM",t[t["TAIWAN"]=1]="TAIWAN",t[t["SATELITE"]=2]="SATELITE"})(o||(o={}));var Ft=(n={},Object(R["a"])(n,o.OSM,"簡易地圖"),Object(R["a"])(n,o.TAIWAN,"詳細地圖"),Object(R["a"])(n,o.SATELITE,"衛星地圖"),n),It=function(){return Object.entries({zoomIn:"/images/zoom-in.svg",zoomOut:"/images/zoom-out.svg"}).reduce((function(t,e){var a=Object(s["a"])(e,2),n=a[0],o=a[1],i=document.createElement("img");return i.setAttribute("src",o),Object.assign(Object.assign({},t),Object(R["a"])({},n,i))}),{})},At=pt.reduce((function(t,e){return Object.assign(Object.assign({},t),Object(R["a"])({},e,new z["b"]({image:new Y["a"]({anchorYUnits:W["a"].PIXELS,anchorOrigin:Ct["a"].BOTTOM_LEFT,src:Ot(e)})})))}),{}),Mt=new z["b"]({}),Et=new z["b"]({image:new Z["a"]({fill:new H["a"]({color:"#A22929"}),radius:12,stroke:new q["a"]({color:"#FFFFFF",width:1})})}),Tt=function(){function t(e){Object(P["a"])(this,t),this.appliedFilters=[],this.factoryMap=new Map,this._map=e}return Object(B["a"])(t,[{key:"getFactory",value:function(t){return this.factoryMap.get(t)}},{key:"updateFactory",value:function(t,e){this.factoryMap.set(t,e);var a=this.factoriesLayerSource.getFeatureById(t);a&&a.setStyle(this.getFactoryStyle(e))}},{key:"addFactories",value:function(t){var e=this,a=this.createFactoryFeature.bind(this),n=t.filter((function(t){return!e.factoryMap.has(t.id)})).map(a);this.factoriesLayerSource.addFeatures(n),t.forEach((function(t){return e.updateFactory(t.id,t)}))}},{key:"hideFactories",value:function(t){var e=this;t.forEach((function(t){var a=e.factoriesLayerSource.getFeatureById(t.id);a.setStyle(Mt)}))}},{key:"setFactoryStatusFilter",value:function(t){this.appliedFilters=t,this.updateFactoriesFeatureStyle()}},{key:"isFactoryVisible",value:function(t){return 0===this.appliedFilters.length||this.appliedFilters.includes(jt(t))}},{key:"getFactoryStyle",value:function(t){var e=this.isFactoryVisible(t);return e?At[jt(t)]:Mt}},{key:"createFactoryFeature",value:function(t){var e=new G["a"]({geometry:new J["a"](Object(Q["i"])([t.lng,t.lat],"EPSG:4326","EPSG:3857"))});return e.setId(t.id),e.setStyle(this.getFactoryStyle(t)),e}},{key:"forEachFeatureFactory",value:function(t){var e=this;this.factoriesLayerSource.getFeatures().forEach((function(a){var n=a.getId(),o=e.factoryMap.get(n);t(a,o)}))}},{key:"displayAllFactory",value:function(){this.forEachFeatureFactory((function(t,e){t.setStyle(At[jt(e)])}))}},{key:"updateFactoriesFeatureStyle",value:function(){var t=this;this.forEachFeatureFactory((function(e,a){e.setStyle(t.getFactoryStyle(a))}))}},{key:"mapInstance",get:function(){return this._map}},{key:"factories",get:function(){return Object(p["a"])(this.factoryMap.values())}},{key:"factoriesLayerSource",get:function(){if(!this._factoriesLayerSource){this._factoriesLayerSource=new nt["a"]({features:[]});var t=new et["a"]({source:this._factoriesLayerSource,zIndex:3});this.mapInstance.map.addLayer(t)}return this._factoriesLayerSource}}]),t}(),Lt=function(){for(var t=Object(Q["d"])("EPSG:3857"),e=t.getExtent(),a=new Array(21),n=Object(tt["E"])(e)/256,o=new Array(21),i=0;i<21;++i)a[i]=n/Math.pow(2,i),o[i]=i;return new K["b"]({origin:Object(tt["C"])(e),resolutions:a,matrixIds:o})},Dt=function(t,e){var a=function(){switch(t){case o.OSM:return new ot["a"]({crossOrigin:"Anonymous",attributions:'<a href="https://osm.tw/" target="_blank">OpenStreetMap 台灣</a>'});case o.TAIWAN:return new X["a"]({matrixSet:"EPSG:3857",format:"image/png",url:"https://wmts.nlsc.gov.tw/wmts",layer:"EMAP",tileGrid:e,crossOrigin:"Anonymous",style:"default",wrapX:!0,attributions:'<a href="https://maps.nlsc.gov.tw/" target="_blank">國土測繪圖資服務雲</a>'});case o.SATELITE:return new X["a"]({matrixSet:"EPSG:3857",format:"image/png",url:"https://wmts.nlsc.gov.tw/wmts/PHOTO_MIX/default/EPSG:3857/{TileMatrix}/{TileRow}/{TileCol}",layer:"EMAP",tileGrid:e,requestEncoding:"REST",crossOrigin:"Anonymous",style:"default",wrapX:!0,attributions:'<a href="https://maps.nlsc.gov.tw/" target="_blank">國土測繪圖資服務雲</a>'});default:return new ot["a"]({crossOrigin:"Anonymous",attributions:'<a href="https://osm.tw/" target="_blank">OpenStreetMap 台灣</a>'})}}();return new at["a"]({source:a,opacity:.6,zIndex:1})},Vt=function(t){return new at["a"]({source:new X["a"]({matrixSet:"EPSG:3857",format:"image/png",url:"https://wmts.nlsc.gov.tw/wmts/nURBAN2/default/EPSG:3857/{TileMatrix}/{TileRow}/{TileCol}",layer:"LUIMAP",requestEncoding:"REST",tileGrid:t,tileLoadFunction:function(t,e){var a=t.getImage();xt(e).then((function(t){a.src=t}))},crossOrigin:"Anonymous",style:"default",wrapX:!0,attributions:'<a href="https://maps.nlsc.gov.tw/" target="_blank">國土測繪圖資服務雲</a>'}),opacity:.5,zIndex:2})},Ut=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(P["a"])(this,t),this.tileGrid=Lt(),this.hasInitialLocation=!1,this.mapDom=e,this.baseLayer=Dt(o.OSM,this.tileGrid),this._map=this.instantiateOLMap(this.mapDom,this.baseLayer,n),n.minimap||(this.geolocation=this.setupGeolocationTracking(this._map)),this.setupEventListeners(this._map,a)}return Object(B["a"])(t,[{key:"setupEventListeners",value:function(t,e){var a=this,n=function(){return Object(v["a"])(a,void 0,void 0,regeneratorRuntime.mark((function a(){var n,o,i,r,c,l,u,d,p,v,m,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.getView(),o=n.getZoom(),i=n.getResolutionForZoom(o),r=Math.ceil(i/2),c=Object(Q["i"])(n.getCenter(),"EPSG:3857","EPSG:4326"),l=Object(s["a"])(c,2),u=l[0],d=l[1],!e.onMoved){a.next=11;break}return p=this.mapDom.getBoundingClientRect(),v=p.width,m=p.height,a.next=9,this.canPlaceFactory([v/2,m/2]);case 9:f=a.sent,e.onMoved([u,d,r,o],f);case 11:case"end":return a.stop()}}),a,this)})))};t.on("change:resolution",n),t.on("moveend",n),t.on("zoomend",(function(){var a=t.getView(),n=a.getZoom();e.onZoomed&&e.onZoomed(n)})),t.on("click",(function(n){return Object(v["a"])(a,void 0,void 0,regeneratorRuntime.mark((function a(){var o,i,r,c,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.onClicked&&(o=Object(Q["i"])(n.coordinate,"EPSG:3857","EPSG:4326"),i=Object(s["a"])(o,2),r=i[0],c=i[1],l=t.forEachFeatureAtPixel(n.pixel,(function(t){return t}),{layerFilter:function(t){return 5!==t.getZIndex()}}),e.onClicked([r,c],l));case 1:case"end":return a.stop()}}),a)})))})),t.on("pointermove",(function(e){e.dragging||(t.getTargetElement().style.cursor=t.hasFeatureAtPixel(t.getEventPixel(e.originalEvent))?"pointer":"")})),this.getLUIMAPLayer().then((function(t){t.on("change:visible",(function(){e.onLUILayerVisibilityChange&&e.onLUILayerVisibilityChange(t.getVisible())}))}))}},{key:"setCoordinate",value:function(t,e,a){var n=this.map.getView();a=a||n.getZoom(),n.setCenter(Object(Q["i"])([t,e],"EPSG:4326","EPSG:3857")),n.setZoom(a)}},{key:"instantiateOLMap",value:function(t,e){var a,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Lt();if(o.getInitialLocation&&(n=o.getInitialLocation())){var r=n,c=Object(s["a"])(r,3),l=c[0],u=c[1],d=c[2];a=new N["a"]({center:Object(Q["i"])([l,u],"EPSG:4326","EPSG:3857"),zoom:d}),this.hasInitialLocation=!0}else a=new N["a"]({center:Object(Q["i"])([120.1,23.234],"EPSG:4326","EPSG:3857"),zoom:16});var p=It(),v={target:t,layers:[e,Vt(i)],view:a,controls:[new it["a"]({zoomInLabel:p.zoomIn,zoomOutLabel:p.zoomOut}),new rt["a"],new ct["a"]],interactions:Object(lt["a"])({pinchRotate:!1}).extend([new ut["a"]({threshold:.4})])};return o.minimap&&(v.controls=[],v.interactions=[]),new $["a"](v)}},{key:"setupGeolocationTracking",value:function(t){var e=t.getView(),a=new st["a"]({trackingOptions:{enableHighAccuracy:!0},projection:e.getProjection()});a.setTracking(!0);var n=this.setupGeolocationLayer(a);return t.addLayer(n),a}},{key:"setupGeolocationLayer",value:function(t){var e=this,a=new G["a"],n=function(t){return Number.isNaN(t)?new z["b"]({image:new Z["a"]({fill:new H["a"]({color:"#0099ff"}),stroke:new q["a"]({color:"#fff",width:3}),radius:15})}):new z["b"]({image:new Y["a"]({anchor:[.5,.5],src:"/images/now.svg",rotation:t,rotateWithView:!0})})};a.setStyle(n(NaN)),t.on("change:position",(function(){var e=t.getPosition();a.setGeometry(e?new J["a"](e):void 0)})),t.on("change:heading",(function(){var e;a.setStyle(n((e=t.getHeading(),null!==e&&void 0!==e?e:NaN)))}));var o=new G["a"];t.on("change:accuracyGeometry",(function(){o.setGeometry(t.getAccuracyGeometry())}));var i=this.hasInitialLocation;t.on("change",(function(){if(!i){var a=t.getPosition();a&&(e.zoomToGeolocation(),i=!0)}}));var r=new et["a"]({source:new nt["a"]({features:[a,o]}),zIndex:5});return r}},{key:"zoomToGeolocation",value:function(){if(!this.geolocation)throw new Error("No location permission");var t=this.geolocation.getPosition();if(!t)throw new Error("No location permission");var e=this._map.getView();e.setCenter(t),e.setZoom(16)}},{key:"changeBaseMap",value:function(t){this._map.removeLayer(this.baseLayer),this.baseLayer=Dt(t,this.tileGrid),this._map.addLayer(this.baseLayer)}},{key:"canPlaceFactory",value:function(t){var e=this;return new Promise((function(a){e._map.forEachLayerAtPixel(t,(function(t,e){var n=Object(s["a"])(e,4),o=n[3];return a(1===o)}),{layerFilter:function(t){return"LUIMAP"===t.getProperties().source.layer_}}),a(!1)}))}},{key:"getLUIMAPLayer",value:function(){var t=this;return new Promise((function(e,a){var n;t._map.getLayers().forEach((function(t){"LUIMAP"===t.getProperties().source.layer_&&(n=t,e(t))})),n||a(new TypeError("LUIMAP Layer not found"))}))}},{key:"setLUILayerVisible",value:function(t){return Object(v["a"])(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getLUIMAPLayer();case 2:a=e.sent,a.setVisible(t);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getLUILayerVisible",value:function(){return Object(v["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getLUIMAPLayer();case 2:return e=t.sent,t.abrupt("return",e.getVisible());case 4:case"end":return t.stop()}}),t,this)})))}},{key:"setMinimapPin",value:function(t,e){var a=Object(Q["i"])([t,e],"EPSG:4326","EPSG:3857");if(this.minimapPinFeature)this.minimapPinFeature.setGeometry(new J["a"](a));else{var n=new G["a"]({geometry:new J["a"](a)});n.setStyle(Et),this.minimapPinFeature=n;var o=new nt["a"]({features:[n]}),i=new et["a"]({source:o,zIndex:4});this.map.addLayer(i)}this._map.getView().setCenter(a)}},{key:"map",get:function(){return this._map}}]),t}();function Pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=new Ut(t,e,a);return window.changeBaseMap=n.changeBaseMap.bind(n),new Tt(n)}function Bt(t,e){var a=new Ut(t,{},{minimap:!0});return a.map.getView().setCenter(e),new Tt(a)}var Rt=Symbol("MapModeSymbol");function Gt(){var t=Object(l["j"])(o.OSM);return Object(l["h"])(Rt,{currentMapMode:t})}function Nt(){var t=Object(l["d"])(Rt);if(!t)throw new Error("Please use provideMapMode before useMapMode.");return t}var $t=Object(l["b"])({name:"SwitchMapModeButton",props:{isInSheet:{type:Boolean,default:!1}},setup:function(){var t=Object(l["j"])(!1),e=Object(l["d"])(D,Object(l["j"])()),a=Nt(),n=a.currentMapMode,i=Object(l["a"])({get:function(){return n.value},set:function(a){var o;n.value=a,null===(o=e.value)||void 0===o||o.mapInstance.changeBaseMap(a),t.value=!1}}),r=[o.SATELITE,o.OSM,o.TAIWAN].map((function(t){return{type:t,name:Ft[t]}})),c=Object(l["a"])((function(){var t,e,a;return e=null===(t=r.find((function(t){return t.type===i.value})))||void 0===t?void 0:t.name,null!==e&&void 0!==e?e:null===(a=r[0])||void 0===a?void 0:a.name}));return{mapModeBottomSheet:t,mapModes:r,currentMapMode:i,currentMapModeName:c}}}),zt=$t,Yt=a("6544"),Zt=a.n(Yt),Ht=a("288c"),qt=a("8336"),Wt=a("8860"),Jt=a("da13"),Xt=a("5d23"),Kt=a("e0c7"),Qt=Object(y["a"])(zt,V,U,!1,null,null,null),te=Qt.exports;Zt()(Qt,{VBottomSheet:Ht["a"],VBtn:qt["a"],VList:Wt["a"],VListItem:Jt["a"],VListItemTitle:Xt["b"],VSubheader:Kt["a"]});var ee=Object(l["b"])({name:"DisplaySettingBottomSheet",components:{SwitchMapModeButton:te},setup:function(){var t=Object(l["j"])(!1),e=Object(l["d"])(D,Object(l["j"])()),a=Object(l["j"])(!1),n=Object(l["a"])({get:function(){var t;return null===(t=e.value)||void 0===t||t.mapInstance.getLUILayerVisible().then((function(t){a.value=t})),a.value},set:function(t){var n;null===(n=e.value)||void 0===n||n.mapInstance.setLUILayerVisible(t),a.value=t}});return{isOpen:t,isLUIMapVisable:n}}}),ae=ee,ne=Object(y["a"])(ae,T,L,!1,null,null,null),oe=ne.exports;Zt()(ne,{VBottomSheet:Ht["a"],VBtn:qt["a"],VList:Wt["a"],VListItem:Jt["a"],VSubheader:Kt["a"]});a("9911"),a("2b3d");var ie=a("bc3a"),re=a.n(ie),ce=a("9663"),se=a.n(ce),le="https://staging.disfactory.tw/api",ue=re.a.create({baseURL:le,headers:{"Content-Type":"application/json"}});function de(t,e,a){return Object(v["a"])(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ue.get("/factories?range=".concat(t,"&lng=").concat(e,"&lat=").concat(a));case 3:return o=n.sent,i=o.data,n.abrupt("return",i);case 8:throw n.prev=8,n.t0=n["catch"](0),console.error(n.t0),new TypeError("Get factory failed");case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))}var pe="39048813b021935";function ve(t){return Object(v["a"])(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("image",t),e.next=4,re()({method:"POST",url:"https://api.imgur.com/3/image",data:a,headers:{"Content-Type":"multipart/form-data",Authorization:"Client-ID ".concat(pe)}});case 4:return n=e.sent,o=n.data,e.abrupt("return",{link:o.data.link,file:t});case 7:case"end":return e.stop()}}),e)})))}var me=function(t){return t[0]+t[1]/60+t[2]/3600};function fe(t){var e=new FileReader;return new Promise((function(a){e.onload=function(t){if(t.target){var e=se.a.readFromBinaryFile(t.target.result),n={};e.GPSLatitude&&(n.Latitude=me(e.GPSLatitude)),e.GPSLongitude&&(n.Longitude=me(e.GPSLongitude)),e.DateTimeOriginal&&(n.DateTimeOriginal=e.DateTimeOriginal),a(n)}else a({})},e.readAsArrayBuffer(t)}))}function be(t){var e=t.link,a=t.file;return Object(v["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fe(a);case 2:return n=t.sent,t.next=5,ue.post("/images",Object.assign({url:e},n));case 5:return o=t.sent,i=o.data,t.abrupt("return",{token:i.token,src:URL.createObjectURL(a)});case 8:case"end":return t.stop()}}),t)})))}function ge(t){return Object(v["a"])(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(Array.from(t).map((function(t){return ve(t).then((function(t){return be(t)}))}))));case 1:case"end":return e.stop()}}),e)})))}function ye(t,e,a){var n=a.nickname,o=a.contact;return Object(v["a"])(this,void 0,void 0,regeneratorRuntime.mark((function a(){var i=this;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(Array.from(e).map((function(e){return ve(e).then((function(e){return function(){return Object(v["a"])(i,void 0,void 0,regeneratorRuntime.mark((function a(){var i,r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,fe(e.file);case 2:return i=a.sent,a.next=5,ue.post("/factories/".concat(t,"/images"),Object.assign(Object.assign({url:e.link},i),{nickname:n,contact:o}));case 5:return r=a.sent,c=r.data,c.image_path=e.link,a.abrupt("return",c);case 9:case"end":return a.stop()}}),a)})))}()}))}))));case 1:case"end":return a.stop()}}),a)})))}function he(t){return Object(v["a"])(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.post("/factories",JSON.stringify(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),console.error(e.t0),new TypeError("Create factory failed");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))}function _e(t,e){return Object(v["a"])(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ue.put("/factories/".concat(t),JSON.stringify(e));case 3:return n=a.sent,o=n.data,a.abrupt("return",o);case 8:throw a.prev=8,a.t0=a["catch"](0),console.error(a.t0),new TypeError("Update factory failed");case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))}function Se(t){return Object(v["a"])(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.get("/factories/".concat(t,"/report_records"));case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),console.error(e.t0),new TypeError("Fetch factory error");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))}var we=a("0710"),xe=a("698f"),Ce=Symbol("GASymbol");function Oe(t){Object(l["h"])(Ce,t.root.$gtag)}function ke(){var t=Object(l["d"])(Ce);if(!t)throw new Error("use provideGA before useGA");var e=function(e){t.pageview({page_path:e})},a=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.event(e,a)};return{pageview:e,event:a}}a("a15b"),a("e25e"),a("ac1f"),a("466d");var je=!(!navigator.userAgent.match(/(iPod|iPhone|iPad)/)||!navigator.userAgent.match(/AppleWebKit/));/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Fe(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(t)return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||"0",10)].join(".")}}function Ie(){var t;return!!je&&!!(t=Fe())&&!!t.match(/^13\.(1|2|3)/)}var Ae,Me=Symbol("ModalStateSymbol"),Ee=function(){var t=Object(l["i"])({updateFactorySuccessModal:!1,updateFactoryImageSuccessModal:!1,createFactorySuccessModal:!1,aboutModalOpen:!1,contactModalOpen:!1,safetyModalOpen:!1,gettingStartedModalOpen:"true"!==localStorage.getItem("use-app"),tutorialModalOpen:!1,supportIOSVersionModalOpen:Ie(),sidebarOpen:!1,filterModalOpen:!1});return Object(l["h"])(Me,t),t},Te=function(){var t=Object(l["d"])(Me);if(!t)throw new Error("Use useModalState before provideModalState");var e=ke(),a=e.event,n=function(){t.updateFactoryImageSuccessModal=!0,window.setTimeout((function(){t.updateFactoryImageSuccessModal=!1}),3e3)},o=function(){t.updateFactorySuccessModal=!0,window.setTimeout((function(){t.updateFactorySuccessModal=!1}),3e3)},i=function(){t.createFactorySuccessModal=!0,window.setTimeout((function(){t.createFactorySuccessModal=!1}),3e3)},r=function(){t.createFactorySuccessModal=!1},c=function(){t.aboutModalOpen=!0},s=function(){t.aboutModalOpen=!1},u=function(){t.contactModalOpen=!0},d=function(){t.contactModalOpen=!1},p=function(){t.safetyModalOpen=!0},v=function(){t.safetyModalOpen=!1},m=function(){t.gettingStartedModalOpen=!0},f=function(){t.gettingStartedModalOpen=!1},b=function(){t.tutorialModalOpen=!0},g=function(){t.tutorialModalOpen=!1},y=function(){t.supportIOSVersionModalOpen=!1},h=function(){var e=!t.sidebarOpen;a("toggleSidebar",{target:e}),t.sidebarOpen=e},_=function(){a("closeFilterModal"),t.filterModalOpen=!1},S=function(){a("openFilterModal"),t.filterModalOpen=!0},w={openUpdateFactorySuccessModal:o,openUpdateFactoryImagesSuccessModal:n,openCreateFactorySuccessModal:i,closeCreateFactorySuccessModal:r,openAboutModal:c,closeAboutModal:s,openContactModal:u,closeContactModal:d,openSafetyModal:p,closeSafetyModal:v,openGettingStartedModal:m,closeGettingStartedModal:f,openTutorialModal:b,closeTutorialModal:g,toggleSidebar:h,openFilterModal:S,closeFilterModal:_,closesupportIOSVersionModal:y};return[t,w]},Le=(a("c975"),Symbol("AppState"));(function(t){t["INITIAL"]="INITIAL",t["CREATE_FACTORY_1"]="CREATE_FACTORY_1",t["CREATE_FACTORY_2"]="CREATE_FACTORY_2",t["CREATE_FACTORY_3"]="CREATE_FACTORY_3",t["UPDATE_FACTORY_IMAGES"]="UPDATE_FACTORY_IMAGES",t["UPDATE_FACTORY_MODE"]="UPDATE_FACTORY_MODE"})(Ae||(Ae={}));var De,Ve=[Ae.CREATE_FACTORY_1,Ae.CREATE_FACTORY_2,Ae.CREATE_FACTORY_3],Ue=[Ae.UPDATE_FACTORY_IMAGES,Ae.UPDATE_FACTORY_MODE],Pe=function(){var t=Object(l["i"])({pageState:Ae.INITIAL,factoryData:null,factoryLocation:[],isCreateMode:Object(l["a"])((function(){return Ve.includes(t.pageState)})),createStepIndex:Object(l["a"])((function(){return Ve.indexOf(t.pageState)+1})),isEditImagesMode:Object(l["a"])((function(){return t.pageState===Ae.UPDATE_FACTORY_IMAGES})),isEditFactoryMode:Object(l["a"])((function(){return t.pageState===Ae.UPDATE_FACTORY_MODE})),updateFactoryField:"others",isEditComment:Object(l["a"])((function(){return t.pageState===Ae.UPDATE_FACTORY_MODE&&"others"===t.updateFactoryField})),isEditName:Object(l["a"])((function(){return t.pageState===Ae.UPDATE_FACTORY_MODE&&"name"===t.updateFactoryField})),isEditType:Object(l["a"])((function(){return t.pageState===Ae.UPDATE_FACTORY_MODE&&"factory_type"===t.updateFactoryField})),isEditMode:Object(l["a"])((function(){return Ue.includes(t.pageState)})),isInitialState:Object(l["a"])((function(){return t.pageState===Ae.INITIAL})),selectFactoryMode:Object(l["a"])((function(){return t.pageState===Ae.CREATE_FACTORY_1})),formPageOpen:Object(l["a"])((function(){return Ve.includes(t.pageState)||t.pageState===Ae.UPDATE_FACTORY_IMAGES})),isInitialPage:Object(l["a"])((function(){return t.pageState===Ae.INITIAL})),mapLngLat:[],canPlaceFactory:!1,factoryDetailsExpanded:!1});return Object(l["h"])(Le,t),[t]},Be=function(t){var e=ke(),a=e.event,n=e.pageview,o=function(){throw new Error("Invalid page transition")},i={startCreateFactory:function(){t.pageState===Ae.INITIAL?t.pageState=Ae.CREATE_FACTORY_1:o(),a("enterSelectFactoryMode")},gotoNextCreate:function(){var e=Ve.indexOf(t.pageState);-1!==e&&e!==Ve.length-1?t.pageState=Ve[e+1]:o(),0===e&&n("/create")},nextCreateStep:function(){var e=Ve.indexOf(t.pageState);Ve[e+1]&&(t.pageState=Ve[e+1])},previousCreateStep:function(){var e=Ve.indexOf(t.pageState);Ve[e-1]&&(t.pageState=Ve[e-1])},cancelCreateFactory:function(){t.pageState in Ve?t.pageState=Ae.INITIAL:o(),a("exitSelectFactoryMode")},gotoCreateStep:function(e){Ve[e]?t.pageState=Ve[e]:o()},startUpdateFactoryImages:function(){t.pageState===Ae.INITIAL?t.pageState=Ae.UPDATE_FACTORY_IMAGES:o(),n("/edit")},cancelUpdateFactoryImages:function(){t.pageState===Ae.UPDATE_FACTORY_IMAGES?t.pageState=Ae.INITIAL:o(),a("exitUpdateFactoryImagesMode")},startUpdateFactoryComment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"others";t.pageState===Ae.INITIAL?(t.pageState=Ae.UPDATE_FACTORY_MODE,t.updateFactoryField=e):o(),n("/editComment")},cancelUpdateFactoryComment:function(){t.pageState===Ae.UPDATE_FACTORY_MODE?t.pageState=Ae.INITIAL:o(),a("exitUpdateFactoryCommentsMode")},closeFactoryPage:function(){Ve.includes(t.pageState)||Ue.includes(t.pageState)?t.pageState=Ae.INITIAL:o(),a("closeFactoryPage")}};function r(e){t.factoryData=e}function c(){t.factoryDetailsExpanded=!0}function s(){var e,a,n,o,i,r,c,s;(null===(a=null===(e=t.factoryData)||void 0===e?void 0:e.feature)||void 0===a?void 0:a.get("defaultStyle"))&&(null===(o=null===(n=t.factoryData)||void 0===n?void 0:n.feature)||void 0===o||o.setStyle(null===(r=null===(i=t.factoryData)||void 0===i?void 0:i.feature)||void 0===r?void 0:r.get("defaultStyle")),null===(s=null===(c=t.factoryData)||void 0===c?void 0:c.feature)||void 0===s||s.unset("defaultStyle")),t.factoryDetailsExpanded=!1,t.factoryData=null}function l(){t.factoryDetailsExpanded=!t.factoryDetailsExpanded}return{pageTransition:i,updateFactoryData:r,openEditFactoryForm:function(t){r(t),i.startUpdateFactoryImages(),n("/edit")},setFactoryLocation:function(e){t.factoryLocation=e,a("setFactoryLocation")},expandFactoryDetail:c,collapseFactoryDetail:s,toggleFactoryDetail:l}},Re=function(){var t=Object(l["d"])(Le);return[t,Be(t)]},Ge=Symbol("AlertState");(function(t){t["info"]="info",t["warn"]="warn",t["error"]="error"})(De||(De={}));var Ne=function(){var t=Object(l["i"])({alert:null});return Object(l["h"])(Ge,t),[t]},$e=function(t){return{showAlert:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:De.warn,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"此錯誤訊息將在3秒後消失。";t.alert={title:e,level:n,dismissText:o},t.timeout=window.setTimeout((function(){t.alert=null,t.timeout=void 0}),a)},dismissAlert:function(){t.alert=null,t.timeout&&(window.clearTimeout(t.timeout),t.timeout=void 0)}}},ze=function(){var t=Object(l["d"])(Ge);return[t,$e(t)]},Ye=(a("b680"),a("acd8"),["lat","lng","zoom"]),Ze=new(function(){function t(){Object(P["a"])(this,t),this.s={},this.lng=this.defineGetterSetter("lng"),this.lat=this.defineGetterSetter("lat"),this.zoom=this.defineGetterSetter("zoom")}return Object(B["a"])(t,[{key:"load",value:function(t){var e=/^#map=([\d.]+)\/([\d.]+)\/([\d.]+)$/.exec(t.hash);null!==e&&(this.s.zoom=parseFloat(e[1]),this.s.lng=parseFloat(e[2]),this.s.lat=parseFloat(e[3]))}},{key:"dumps",value:function(){var t,e=this;return Ye.some((function(t){return"undefined"===typeof e.s[t]}))?"":"#map=".concat(null===(t=this.s.zoom)||void 0===t?void 0:t.toFixed(2),"/").concat(this.s.lng,"/").concat(this.s.lat)}},{key:"defineGetterSetter",value:function(t){var e=this;return function(){return arguments.length>0&&(e.s[t]=arguments.length<=0?void 0:arguments[0]),e.s[t]}}}]),t}()),He=function(t){return new Promise((function(e){return t.root.$nextTick(e)}))},qe=Object(l["b"])({components:{AppButton:_,AppNavbar:k,AppTextField:E,DisplaySettingBottomSheet:oe},props:{setFactoryLocation:{type:Function,required:!0}},setup:function(t,e){var a=ke(),n=a.event,o=Object(l["j"])(null),i=Object(l["j"])(null),r=Object(l["d"])(D,Object(l["j"])()),c=Te(),u=Object(s["a"])(c,2),d=u[1],m=Re(),f=Object(s["a"])(m,2),b=f[0],g=f[1],y=g.openEditFactoryForm,h=g.pageTransition,_=g.expandFactoryDetail,S=ze(),w=Object(s["a"])(S,2),x=w[1],C=function(t){if(r.value){var e=r.value.getFactory(t.getId());e&&(e.feature=t,b.factoryData=e)}},O=function(){r.value&&r.value.mapInstance.map.updateSize()},k=function(){b.factoryData&&y(b.factoryData)};function j(){r.value&&(r.value.mapInstance.setLUILayerVisible(!0),h.startCreateFactory())}Object(l["e"])((function(){var t=new we["a"]({element:i.value,positioning:xe["a"].BOTTOM_LEFT}),a=Pt(o.value,{onMoved:function(t,e){var o=Object(s["a"])(t,4),i=o[0],r=o[1],c=o[2],l=o[3];return Object(v["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Ze.lat(r),Ze.lng(i),Ze.zoom(l),window.location.hash=Ze.dumps(),b.canPlaceFactory=e,b.mapLngLat=[i,r],n("moveMap"),t.prev=7,t.next=10,de(c,i,r);case 10:o=t.sent,Array.isArray(o)&&a.addFactories(o),t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](7);case 16:case"end":return t.stop()}}),t,null,[[7,14]])})))},onClicked:function(t,a){var o,i,r,c,s,l,u,d;return Object(v["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var p,v;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return(null===(i=null===(o=b.factoryData)||void 0===o?void 0:o.feature)||void 0===i?void 0:i.get("defaultStyle"))&&(null===(c=null===(r=b.factoryData)||void 0===r?void 0:r.feature)||void 0===c||c.setStyle(null===(l=null===(s=b.factoryData)||void 0===s?void 0:s.feature)||void 0===l?void 0:l.get("defaultStyle")),null===(d=null===(u=b.factoryData)||void 0===u?void 0:u.feature)||void 0===d||d.unset("defaultStyle")),a?("setStyle"in a&&(p=a.getStyle().clone(),a.set("defaultStyle",p.clone()),v=p.getImage().clone(),v.setScale(1.25),p.setImage(v),p.setZIndex(2),a.setStyle(p)),n("clickFactoryPin"),C(a),e.root.$vuetify.breakpoint.mdAndUp&&_()):b.factoryData=null,t.next=4,He(e);case 4:O();case 5:case"end":return t.stop()}}),t)})))},onZoomed:function(t){Ze.zoom(t),window.location.hash=Ze.dumps()}},{getInitialLocation:function(){if(Ze.load(window.location),""!==Ze.dumps())return[Ze.lng(),Ze.lat(),Ze.zoom()]}});a.mapInstance.map.addOverlay(t),r.value=a,a.mapInstance.setLUILayerVisible(!1)})),Object(l["e"])((function(){window.addEventListener("resize",O)})),Object(l["f"])((function(){window.removeEventListener("resize",O)}));var F=Object(l["j"])([]),I=function(t){return F.value.includes(t)},A=function(t){r.value&&(I(t)?F.value=F.value.filter((function(e){return e!==t})):F.value=[].concat(Object(p["a"])(F.value),[t]),r.value.setFactoryStatusFilter(F.value))},M=pt.map((function(t){return{text:ft(t),color:bt(t),value:t}}));return{root:o,modalActions:d,popup:i,zoomToGeolocation:function(){if(r.value){n("zoomToGeolocation");try{r.value.mapInstance.zoomToGeolocation()}catch(t){x.showAlert("您沒開放手機定位權限， \n請開放定位權限以用定位功能。")}}},appState:b,onClickEditFactoryData:k,onClickCreateFactoryButton:j,onClickFilterButton:A,filterButtonsData:M,checkActive:I,appliedFilters:F}}}),We=qe,Je=(a("d773"),a("132d")),Xe=Object(y["a"])(We,u,d,!1,null,"7f5a975d",null),Ke=Xe.exports;Zt()(Xe,{VBtn:qt["a"],VIcon:Je["a"]});var Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{base:!0,open:t.value},attrs:{"data-label":"sidebar-close"},on:{click:t.close}},[a("div",{class:{sidebar:!0,open:t.value}},[a("div",{staticClass:"close",attrs:{"data-label":"sidebar-close"},on:{click:t.close}}),a("h1",[t._v("主選單")]),a("hr"),a("ul",t._l(t.links,(function(e,n){return a("li",{key:n},[a("a",{attrs:{"data-label":"sidebar-"+e.text,href:t.getHref(e),target:t.getTarget(e)},on:{click:function(a){return a.stopPropagation(),t.onClick(e)}}},[t._v(t._s(e.text))])])})),0)])])},ta=[],ea=Object(l["b"])({name:"AppSidebar",props:{value:{type:Boolean,required:!0}},setup:function(t,e){var a=Te(),n=Object(s["a"])(a,2),o=n[1],i=[{text:"使用說明",action:o.openTutorialModal},{text:"安全須知",action:o.openSafetyModal},{text:"聯絡我們",action:o.openContactModal},{text:"常見問題",href:"https://about.disfactory.tw/#section-f_c360c8de-447e-4c0a-a856-4af18b9a5240"},{text:"關於舉報系統",href:"https://about.disfactory.tw"},{text:"問題回報",href:"https://airtable.com/shrUraKakZRpH52DO"}],r=function(){e.emit("input",!1)};return{links:i,close:r,onClick:function(t){"function"===typeof t.action&&t.action()},getHref:function(t){return t.href},getTarget:function(t){return"string"===typeof t.href?"_blank":null}}}}),aa=ea,na=(a("ca0d"),Object(y["a"])(aa,Qe,ta,!1,null,"66704068",null)),oa=na.exports,ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.alert?a("div",{staticClass:"app-alert"},[a("div",{staticClass:"close",attrs:{"data-label":"alert-close"},on:{click:t.dismiss}}),a("img",{attrs:{src:"/images/alert.svg",alt:"alert"}}),a("div",[a("div",{staticClass:"alert-title"},[t._v(t._s(t.alert.title))]),a("p",{staticClass:"alert-descriptioin"},[t._v(t._s(t.alert.dismissText))])])]):t._e()},ra=[],ca=Object(l["b"])({name:"AppAlert",props:{alert:{type:Object},dismiss:{type:Function}}}),sa=ca,la=(a("9e22"),Object(y["a"])(sa,ia,ra,!1,null,"2a0f768e",null)),ua=la.exports,da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-factory-steps"},[a("v-app-bar",{staticClass:"d-block d-md-none",attrs:{fixed:"",color:"white"}},[a("div",{staticClass:"btn-container",class:{hide:1===t.appState.createStepIndex}},[a("v-btn",{staticClass:"secondary--text",attrs:{icon:""},on:{click:t.onBack}},[a("v-icon",[t._v("mdi-keyboard-backspace")])],1)],1),a("v-spacer"),a("v-toolbar-title",{staticClass:"secondary--text"},[t._v("新增可疑工廠 步驟 ("+t._s(t.appState.createStepIndex)+"/3)")]),a("v-spacer"),a("div",{staticClass:"btn-container"},[a("v-dialog",{attrs:{"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"secondary--text",attrs:{icon:""}},"v-btn",o,!1),n),[a("v-icon",[t._v("mdi-close")])],1)]}}]),model:{value:t.discardDialog,callback:function(e){t.discardDialog=e},expression:"discardDialog"}},[a("v-card",[a("v-card-title",{staticClass:"secondary--text"},[t._v("放棄新增可疑工廠嗎？")]),a("v-card-text",[t._v("放棄新增可疑工廠時，你將遺失所有已輸入的資料。下次需重新填寫。")]),a("v-container",{staticClass:"text-center"},[a("v-btn",{attrs:{width:"100%","x-large":"",rounded:"",color:"primary"},on:{click:function(e){t.discardDialog=!1}}},[t._v("繼續填寫資料")]),a("a",{staticClass:"d-block mt-4 text-decoration-underline",on:{click:t.cancelCreateFactory}},[t._v("放棄新增")])],1)],1)],1)],1)],1),a("v-app-bar",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],attrs:{fixed:"",color:"white"}},[a("v-toolbar-title",[t._v("新增可疑工廠")]),a("div",{staticClass:"ml-15 desktop-step-item",on:{click:function(e){return t.switchStep(1)}}},[a("span",[t._v("選擇工廠位置")]),a("v-icon",{staticClass:"mr-1"},[t._v("mdi-chevron-right")])],1),a("div",{staticClass:"desktop-step-item",class:{inactive:t.appState.createStepIndex<2},on:{click:function(e){return t.switchStep(2)}}},[a("span",[t._v("上傳工廠照片")]),a("v-icon",{staticClass:"mr-1"},[t._v("mdi-chevron-right")])],1),a("div",{staticClass:"desktop-step-item",class:{inactive:t.appState.createStepIndex<3},on:{click:function(e){return t.switchStep(3)}}},[a("span",[t._v("確認及補充工廠資訊")])]),a("v-spacer"),t.$vuetify.breakpoint.mdAndUp?a("v-dialog",{attrs:{"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{outlined:""}},"v-btn",o,!1),n),[t._v(" 取消新增 ")])]}}],null,!1,67231085),model:{value:t.discardDialog,callback:function(e){t.discardDialog=e},expression:"discardDialog"}},[a("v-card",[a("v-card-title",{staticClass:"secondary--text"},[t._v("放棄新增可疑工廠嗎？")]),a("v-card-text",[t._v("放棄新增可疑工廠時，你將遺失所有已輸入的資料。下次需重新填寫。")]),a("v-container",{staticClass:"text-center"},[a("v-btn",{attrs:{width:"100%","x-large":"",rounded:"",color:"primary"},on:{click:function(e){t.discardDialog=!1}}},[t._v("繼續填寫資料")]),a("a",{staticClass:"d-block mt-4 text-decoration-underline",on:{click:t.cancelCreateFactory}},[t._v("放棄新增")])],1)],1)],1):t._e()],1),1===t.appState.createStepIndex?a("div",{staticClass:"create-factory-step-1"},[t.showLongLat?a("div",{staticClass:"select-location-container container-fluid pa-3 py-md-5 px-md-10",class:{desktop:t.$vuetify.breakpoint.mdAndUp}},[a("div",{staticClass:"d-flex flex-md-row justify-space-between align-end align-md-center"},[a("div",{staticClass:"d-flex flex-column flex-md-row align-start align-md-center justify-space-between justify-md-start flex-grow-1"},[a("p",{staticClass:"mb-4 my-md-3 mr-md-10 wgs"},[t._v("以下經緯度版本為WGS84")]),t.inlineLocationForm?t._e():a("p",{staticClass:"font-weight-medium h5 mb-0 mb-1-md mr-md-10 location-text"},[t._v(" 經度："+t._s(t.appState.mapLngLat[0].toFixed(7))+" ")]),t.inlineLocationForm?t._e():a("p",{staticClass:"font-weight-medium h5 mb-0 mr-md-8 location-text"},[t._v(" 緯度："+t._s(t.appState.mapLngLat[1].toFixed(7))+" ")]),t.inlineLocationForm?t._e():a("v-btn",{staticClass:"mr-2 d-none d-md-block primary--text",attrs:{rounded:"",color:"white"},on:{click:t.toggleInlineLocationForm}},[t._v(" 搜尋經緯度 ")]),t.inlineLocationForm?a("div",{staticClass:"d-none d-md-flex justify-space-between align-center flex-grow-1"},[a("div",{staticClass:"d-flex align-center"},[a("p",{staticClass:"font-weight-medium h5 mb-0  mr-7"},[t._v(" 搜尋經緯度 ")]),a("div",{staticClass:"d-block  mr-7",staticStyle:{height:"36px",width:"1px","background-color":"#EAF3BF"}}),a("h5",{staticClass:" mr-2"},[t._v("精度")]),a("v-text-field",{staticClass:" mr-7",attrs:{"hide-details":"",outilned:"",solo:"",placeholder:"例：121.5231872",dense:""},model:{value:t.locationInputState.longitude,callback:function(e){t.$set(t.locationInputState,"longitude",e)},expression:"locationInputState.longitude"}}),a("h5",{staticClass:" mr-2"},[t._v("緯度")]),a("v-text-field",{staticClass:" mr-7",attrs:{"hide-details":"",outilned:"",solo:"",placeholder:"例：25.0458344",dense:""},model:{value:t.locationInputState.latitude,callback:function(e){t.$set(t.locationInputState,"latitude",e)},expression:"locationInputState.latitude"}}),a("h5",{staticClass:"text-decoration-underline mr-5",staticStyle:{cursor:"pointer"},on:{click:t.clearLocationInput}},[t._v("清空")]),a("v-btn",{staticClass:"primary--text",attrs:{rounded:"",color:"white"},on:{click:t.setLocation}},[t._v("定位")])],1),t.inlineLocationForm?a("div",{staticClass:"d-flex align-center"},[a("div",{staticClass:"d-block d-none d-md-block mx-7",staticStyle:{height:"36px",width:"1px","background-color":"#EAF3BF"}}),a("v-btn",{staticClass:"primary--text",attrs:{icon:""},on:{click:t.toggleInlineLocationForm}},[a("v-icon",{attrs:{color:"white"}},[t._v("mdi-close")])],1)],1):t._e()]):t._e()],1),a("v-dialog",{attrs:{"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mr-2 d-md-none primary--text",attrs:{rounded:"",color:"white"}},"v-btn",o,!1),n),[t._v(" 搜尋經緯度 ")])]}}],null,!1,1129603853),model:{value:t.chooseLocationDialog,callback:function(e){t.chooseLocationDialog=e},expression:"chooseLocationDialog"}},[a("v-card",{staticClass:"primary",attrs:{outlined:""}},[a("v-card-text",{staticClass:"pt-4 white--text"},[a("p",[t._v(" 以下經緯度版本為WGS84 ")]),a("h3",{staticClass:"mb-2"},[t._v("精度")]),a("v-text-field",{attrs:{outilned:"",solo:"",placeholder:"例：121.5231872"},model:{value:t.locationInputState.longitude,callback:function(e){t.$set(t.locationInputState,"longitude",e)},expression:"locationInputState.longitude"}}),a("h3",{staticClass:"mb-2"},[t._v("緯度")]),a("v-text-field",{attrs:{outilned:"",solo:"",placeholder:"例：25.0458344"},model:{value:t.locationInputState.latitude,callback:function(e){t.$set(t.locationInputState,"latitude",e)},expression:"locationInputState.latitude"}}),a("div",{staticClass:"d-flex justify-space-between mt-3 align-end"},[a("a",{staticClass:"text-decoration-underline white--text",staticStyle:{height:"36px","line-height":"36px"},on:{click:t.clearLocationInput}},[t._v("清空")]),a("v-btn",{staticClass:"primary--text",attrs:{rounded:"",color:"white"},on:{click:t.setLocation}},[t._v("定位")])],1)],1)],1)],1)],1)]):t._e(),a("div",{staticClass:"px-5 py-4"},[a("v-btn",{staticClass:"mr-2 primary--text",attrs:{rounded:"",color:"white"},on:{click:t.toggleShowLongLat}},[t._v(" "+t._s(t.showLongLat?"隱藏經緯度":"顯示經緯度")+" ")]),a("switch-map-mode-button"),a("v-container",{staticClass:"choose-location-btn-container d-flex justify-center",attrs:{fluid:"",bottom:"50"}},[a("v-btn",{staticClass:"px-md-15",attrs:{"x-large":"",rounded:"",color:"secondary"},on:{click:t.chooseLocation}},[t._v(" 選擇此地點 ")])],1)],1)]):t._e(),2===t.appState.createStepIndex?a("image-upload-form",{attrs:{uploading:t.imageUploadState.uploading,error:t.imageUploadState.error,previewImages:t.uploadedImages,onClickRemoveImage:t.onClickRemoveImage,valid:t.imageUploadFormValid,submit:t.pageTransition.gotoNextCreate,formState:t.formState},model:{value:t.selectedImages,callback:function(e){t.selectedImages=e},expression:"selectedImages"}}):t._e(),3===t.appState.createStepIndex?a("confirm-factory",{attrs:{formState:t.formState,previewImages:t.uploadedImages,submit:t.submitFactory}}):t._e()],1)},pa=[],va=function(){var t=Object(l["j"])([]),e=Object(l["i"])({error:null,uploading:!1}),a=Object(l["j"])(null);Object(l["k"])(a,(function(){e.error=null,a.value&&(e.uploading=!0,ge(a.value).then((function(e){t.value=[].concat(Object(p["a"])(t.value),Object(p["a"])(e))})).catch((function(t){console.error(t),e.error=!0})).finally((function(){e.uploading=!1})))}));var n=function(e){var a=e.src;t.value=t.value.filter((function(t){return t.src!==a}))},o=Object(l["a"])((function(){return t.value.length>0&&!e.uploading}));return{selectedImages:a,imageUploadState:e,uploadedImages:t,onClickRemoveImage:n,imageUploadFormValid:o}},ma=function(){var t=Object(l["j"])([]),e={error:null,uploading:!1},a=Object(l["j"])(null);Object(l["k"])(a,(function(){if(a.value){var e=Array.from(a.value).map((function(t){return URL.createObjectURL(t)})).map((function(t){return{src:t,token:t}}));t.value=[].concat(Object(p["a"])(t.value),Object(p["a"])(e))}}));var n=function(e){var a=e.src;t.value=t.value.filter((function(t){return t.src!==a}))},o=Object(l["a"])((function(){return t.value.length>0}));return{selectedImages:a,imageUploadState:e,uploadedImages:t,onClickRemoveImage:n,imageUploadFormValid:o}},fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image-upload-form w-100"},[a("v-container",{staticClass:"pt-3 pt-md-12 pb-md-8",staticStyle:{"max-width":"630px",position:"relative"}},[a("h2",{staticClass:"mb-4 secondary--text"},[t._v("上傳工廠照片")]),a("p",[t._v("請至少上傳一張工廠照片。")]),a("h3",{staticClass:"mb-3 mt-7 primary--text required"},[t._v("工廠照片")]),a("div",{staticClass:"flex align-items-center mb-3"},[a("v-btn",{staticClass:"mr-3",attrs:{disabled:t.uploading,outlined:""}},[a("label",[a("input",{ref:"image",staticStyle:{display:"none"},attrs:{multiple:"",type:"file",accept:"image/*",disabled:t.uploading},on:{change:t.onChange}}),t._v(" 新增照片 ")])]),t.uploading&&!t.disableProgressiveUpload?a("span",[t._v("上傳中...")]):t._e(),!t.valid||t.uploading||t.error||t.disableProgressiveUpload?t._e():a("span",[t._v(" 上傳成功 "),a("v-icon",{staticClass:"primary--text"},[t._v("mdi-checkbox-marked-circle")])],1),t.error&&!t.disableProgressiveUpload?a("span",[t._v("上傳錯誤")]):t._e()],1),a("div",{staticClass:"preview-images-container mb-2"},t._l(t.previewImages,(function(e){return a("div",{key:e.token,staticClass:"uploaded-image"},[a("img",{attrs:{src:e.src}}),a("button",{staticClass:"remove-image-btn",on:{click:function(a){return t.removeImage(e)}}})])})),0),a("hr"),a("h2",{staticClass:"mt-7 mb-2 secondary--text"},[t._v("聯絡資訊（非必填）")]),a("p",[t._v(" 如果對於照片有疑問，"),a("br"),t._v(" 我們會透過以下提供的資訊聯絡你。"),a("br"),t._v(" 如不願揭露自己身份，可跳過不填。 ")]),a("h3",{staticClass:"primary--text mt-7 mb-2"},[t._v("聯絡人暱稱")]),a("v-text-field",{attrs:{outlined:"",placeholder:"例：林先生、林小姐"},model:{value:t.formState.nickname,callback:function(e){t.$set(t.formState,"nickname",e)},expression:"formState.nickname"}}),a("h3",{staticClass:"primary--text mt-7 mb-2"},[t._v("聯絡方式 (email或電話)")]),a("v-text-field",{attrs:{outlined:"",placeholder:"例：abc@email.com、0920-123456"},model:{value:t.formState.contact,callback:function(e){t.$set(t.formState,"contact",e)},expression:"formState.contact"}}),a("div",{staticClass:"bottom-button-container w-100 d-flex justify-center align-items-center px-xs-3 pb-md-9"},[a("v-btn",{staticStyle:{width:"100%","max-width":"345px"},attrs:{"x-large":"",rounded:"",disabled:!t.valid,color:"primary"},on:{click:t.onSubmit}},[t._v(" "+t._s(t.submitText||"下一步")+" ")])],1)],1)],1)},ba=[],ga=Object(l["b"])({props:{previewImages:{type:Array,default:[]},uploading:{default:!1},error:{default:null},onClickRemoveImage:{type:Function},submit:{type:Function},valid:{type:Boolean,default:!1},formState:{type:Object},submitText:{type:String},disableProgressiveUpload:{type:Boolean,default:!1}},name:"ImageUploadForm",setup:function(t,e){return{images:[],onChange:function(t){e.emit("input",t.target.files)},onSubmit:function(){t.valid&&"function"===typeof t.submit&&t.submit()},removeImage:function(e){t.onClickRemoveImage(e)}}}}),ya=ga,ha=(a("dafd"),a("a523")),_a=a("8654"),Sa=Object(y["a"])(ya,fa,ba,!1,null,"9c1898e4",null),wa=Sa.exports;Zt()(Sa,{VBtn:qt["a"],VContainer:ha["a"],VIcon:Je["a"],VTextField:_a["a"]});var xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"confirm-factory-page"},[a("v-container",{staticClass:"pt-3 pt-md-12",staticStyle:{"max-width":"630px",position:"relative"}},[a("h2",{staticClass:"mt-2 mb-2 secondary--text"},[t._v("確認及補充工廠資訊")]),a("p",[t._v("請確認工廠地點及照片，並補充工廠資訊。")]),a("h3",{staticClass:"mt-7 mb-2 required primary--text"},[t._v("工廠地點")]),a("p",[t._v(" 返回"),a("a",{on:{click:t.gotoStepOne}},[t._v("步驟(1/3)")]),t._v("編輯 ")]),a("div",{staticClass:"d-flex flex-column flex-md-row justify-md-between"},[a("div",{staticClass:"w-100 minimap-container",class:{desktop:t.$vuetify.breakpoint.mdAndUp},staticStyle:{position:"relative"}},[a("minimap",{attrs:{initialFactories:t.initialFactories,initialLocation:t.initialLocation,pinLocation:t.appState.factoryLocation}}),a("div",{staticClass:"minimap-overlay",on:{click:t.gotoStepOne}})],1),a("div",{staticClass:"d-flex justify-between mt-3 mt-md-0 ml-md-4 d-md-inline-flex flex-md-column justify-md-start"},[a("p",[t._v(" 經度："+t._s(t.appState.factoryLocation[0].toFixed(7))+" "),a("br"),t._v(" 緯度："+t._s(t.appState.factoryLocation[1].toFixed(7))+" ")]),a("p",[a("small",[t._v("以上經緯度版本為WGS84")])])])]),a("h3",{staticClass:"mt-7 mb-2 required primary--text"},[t._v("工廠照片")]),a("p",[t._v(" 返回"),a("a",{on:{click:t.gotoStepTwo}},[t._v("步驟(2/3)")]),t._v("編輯 ")]),a("div",{staticClass:"preview-images-container mb-2"},t._l(t.previewImages,(function(t){return a("div",{key:t.token,staticClass:"uploaded-image"},[a("img",{attrs:{src:t.src}})])})),0),a("h3",{staticClass:"mt-5 mb-2 primary--text"},[t._v("聯絡人暱稱")]),a("p",[t._v(t._s(t.formState.nickname||"未填寫"))]),a("h3",{staticClass:"mt-5 mb-2 primary--text"},[t._v("聯絡方式 (email或電話)")]),a("p",[t._v(t._s(t.formState.contact||"未填寫"))]),a("hr"),a("h2",{staticClass:"mt-5 secondary--text mb-5"},[t._v("其他工廠資訊（非必填）")]),a("p",[t._v("提供明確的工廠資訊能夠幫助我們更快速的填寫公文。")]),a("h3",{staticClass:"mt-5 mb-2 primary--text"},[t._v("工廠描述")]),a("v-textarea",{attrs:{outlined:"",solo:"",placeholder:"例：常常散發異味"},model:{value:t.formState.others,callback:function(e){t.$set(t.formState,"others",e)},expression:"formState.others"}}),a("h3",{staticClass:"mt-5 mb-2 primary--text"},[t._v("工廠外部文字")]),a("v-text-field",{attrs:{outlined:"",placeholder:"例：小明化工廠",color:"primary"},model:{value:t.formState.name,callback:function(e){t.$set(t.formState,"name",e)},expression:"formState.name"}}),a("h3",{staticClass:"mt-5 mb-2 primary--text"},[t._v("工廠類型")]),a("v-select",{attrs:{items:t.factoryTypeItems,solo:"",outlined:"",placeholder:"未選擇"},model:{value:t.formState.type,callback:function(e){t.$set(t.formState,"type",e)},expression:"formState.type"}}),a("div",{staticClass:"bottom-button-container w-100 d-flex justify-center align-items-center px-xs-3 pb-md-9"},[a("v-btn",t._g(t._b({staticStyle:{width:"100%","max-width":"345px"},attrs:{"x-large":"",rounded:"",color:"primary"},on:{click:t.submit}},"v-btn",t.attrs,!1),t.on),[t._v(" 確認送出 ")])],1)],1)],1)},Ca=[],Oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"minimap"})},ka=[],ja=Object(l["b"])({props:{initialLocation:{type:Array,default:[]},pinLocation:{type:Array,default:[]},initialFactories:{type:Array,default:[]}},name:"Minimap",setup:function(t){var e=Object(l["j"])(null);return Object(l["e"])((function(){var a,n=Bt(e.value,t.initialLocation);n.addFactories(t.initialFactories),(a=n.mapInstance).setMinimapPin.apply(a,Object(p["a"])(t.pinLocation))})),{minimap:e}}}),Fa=ja,Ia=Object(y["a"])(Fa,Oa,ka,!1,null,null,null),Aa=Ia.exports,Ma=Object(l["b"])({name:"ConfirmFactory",components:{Minimap:Aa},props:{formState:{type:Object,default:{}},previewImages:{type:Array,default:[]},submit:{type:Function}},setup:function(){var t,e,a=Object(l["d"])(D,Object(l["j"])()),n=Re(),o=Object(s["a"])(n,2),i=o[0],r=o[1].pageTransition,c=null===(t=a.value)||void 0===t?void 0:t.factories,u=null===(e=a.value)||void 0===e?void 0:e.mapInstance.map.getView().getCenter(),d=Object(p["a"])(dt);return{appState:i,initialFactories:c,initialLocation:u,gotoStepOne:function(){a.value&&(r.gotoCreateStep(0),a.value.mapInstance.setLUILayerVisible(!0))},gotoStepTwo:function(){r.gotoCreateStep(1)},factoryTypeItems:d}}}),Ea=Ma,Ta=(a("c5d3"),a("b974")),La=a("a844"),Da=Object(y["a"])(Ea,xa,Ca,!1,null,"5329eab6",null),Va=Da.exports;function Ua(t){var e=function(e){"backPressed"===e.state&&t()};window.history.pushState("backPressed","",null),window.history.pushState("dummy","",null),window.addEventListener("popstate",e,{once:!0}),Object(l["f"])((function(){window.removeEventListener("popstate",e)}))}Zt()(Da,{VBtn:qt["a"],VContainer:ha["a"],VSelect:Ta["a"],VTextField:_a["a"],VTextarea:La["a"]});var Pa=Object(l["b"])({name:"CreateFactorySteps",components:{ImageUploadForm:wa,ConfirmFactory:Va,SwitchMapModeButton:te},setup:function(){var t=this,e=Re(),a=Object(s["a"])(e,2),n=a[0],o=a[1],i=o.pageTransition,r=o.setFactoryLocation,c=Te(),u=Object(s["a"])(c,2),d=u[1].openCreateFactorySuccessModal,p=ze(),m=Object(s["a"])(p,2),f=m[1],b=ke(),g=b.event,y=Object(l["j"])(!1),h=Object(l["d"])(D,Object(l["j"])());function _(){h.value&&(h.value.mapInstance.setLUILayerVisible(!1),y.value=!1,i.closeFactoryPage())}var S=function(){1===n.createStepIndex?_():2===n.createStepIndex?h.value&&(h.value.mapInstance.setLUILayerVisible(!0),i.previousCreateStep()):i.previousCreateStep()};Ua(S);var w=Object(l["i"])({nickname:"",contact:"",others:"",name:"",type:void 0,submitting:!1}),x=va(),C=x.selectedImages,O=x.imageUploadState,k=x.uploadedImages,j=x.onClickRemoveImage,F=x.imageUploadFormValid,I=function(){return Object(v["a"])(t,void 0,void 0,regeneratorRuntime.mark((function t(){var e,a,o,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return w.submitting=!0,t.prev=1,e=Object(s["a"])(n.factoryLocation,2),a=e[0],o=e[1],r={name:w.name,others:w.others,type:w.type,lng:a,lat:o,images:k.value.map((function(t){return t.token})),nickname:w.nickname,contact:w.contact},g("createFactory",{lng:a,lat:o}),t.next=7,he(r);case 7:c=t.sent,h.value&&h.value.addFactories([c]),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](1);case 13:return t.prev=13,w.submitting=!1,t.finish(13);case 16:i.closeFactoryPage(),d();case 18:case"end":return t.stop()}}),t,null,[[1,11,13,16]])})))},A=Object(l["j"])(!1),M=function(){A.value=!A.value},E=Object(l["j"])(!1),T=Object(l["j"])(!1),L=function(){T.value=!T.value},V=Object(l["i"])({longitude:"",latitude:""}),U=function(){V.longitude="",V.latitude=""},P=function(){if(h.value){var t=parseFloat(V.longitude),e=parseFloat(V.latitude);if(!V.longitude||!V.latitude||isNaN(t)||isNaN(e))E.value=!1;else{var a=h.value.mapInstance.map.getView().getZoom();(!a||a<=17)&&(a=17),h.value.mapInstance.setCoordinate(t,e,a),E.value=!1}}},B=function(t){for(var e=n.createStepIndex-t,a=0;a<e;a++)S()};return{appState:n,pageTransition:i,formState:w,cancelCreateFactory:_,onBack:S,chooseLocation:function(){h.value&&(n.canPlaceFactory?(h.value.mapInstance.setLUILayerVisible(!1),r(n.mapLngLat),i.nextCreateStep()):f.showAlert("此地點不在農地範圍內，\n請回報在農地範圍內的工廠。"))},selectedImages:C,imageUploadState:O,uploadedImages:k,onClickRemoveImage:j,imageUploadFormValid:F,discardDialog:y,submitFactory:I,showLongLat:A,toggleShowLongLat:M,chooseLocationDialog:E,inlineLocationForm:T,locationInputState:V,clearLocationInput:U,toggleInlineLocationForm:L,setLocation:P,switchStep:B}}}),Ba=Pa,Ra=(a("f9b2"),a("40dc")),Ga=a("b0af"),Na=a("99d9"),$a=a("169a"),za=a("2fa4"),Ya=a("2a7f"),Za=Object(y["a"])(Ba,da,pa,!1,null,"7617a7de",null),Ha=Za.exports;Zt()(Za,{VAppBar:Ra["a"],VBtn:qt["a"],VCard:Ga["a"],VCardText:Na["a"],VCardTitle:Na["b"],VContainer:ha["a"],VDialog:$a["a"],VIcon:Je["a"],VSpacer:za["a"],VTextField:_a["a"],VToolbarTitle:Ya["a"]});var qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"update-factory-steps"},[a("v-app-bar",{staticClass:"d-block d-md-none",attrs:{fixed:"",color:"white"}},[a("v-spacer"),t.appState.isEditImagesMode?a("v-toolbar-title",{staticClass:"secondary--text"},[t._v("補充照片")]):a("v-toolbar-title",{staticClass:"secondary--text"},[t._v(" "+t._s(t.updateFormAppTitle)+" ")]),a("v-spacer"),a("div",{staticClass:"btn-container"},[a("v-dialog",{attrs:{"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",o,!1),n),[a("v-icon",[t._v("mdi-close")])],1)]}}]),model:{value:t.discardDialog,callback:function(e){t.discardDialog=e},expression:"discardDialog"}},[t.appState.isEditImagesMode?a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("補充照片尚未完成")]),a("v-card-text",[t._v("放棄補充照片的話，你將遺失所有未新增的資料。下次需重新上傳照片")]),a("v-container",{staticClass:"text-center"},[a("v-btn",{attrs:{width:"100%","x-large":"",rounded:"",color:"green darken-1"},on:{click:function(e){t.discardDialog=!1}}},[t._v("繼續編輯")]),a("a",{staticClass:"d-block mt-4",on:{click:t.cancelUpdateFactoryImages}},[t._v("確定放棄")])],1)],1):a("v-card",[a("v-card-title",{staticClass:"secondary--text"},[t._v(t._s(t.updateFormAppTitle)+"尚未完成！")]),a("v-card-text",[t._v("放棄編輯的話，你將遺失所有未新增的資料。下次需重新填寫。")]),a("v-container",{staticClass:"text-center"},[a("v-btn",{attrs:{width:"100%","x-large":"",rounded:"",color:"primary"},on:{click:function(e){t.discardDialog=!1}}},[t._v("繼續編輯")]),a("a",{staticClass:"d-block mt-4",on:{click:t.cancelUpdateFactory}},[t._v("確定放棄")])],1)],1)],1)],1)],1),t.appState.isEditImagesMode?a("v-app-bar",{staticClass:"d-none d-md-block",attrs:{fixed:"",color:"white"}},[a("v-toolbar-title",{staticClass:"secondary--text"},[t._v("補充照片")]),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{outlined:""}},"v-btn",o,!1),n),[t._v(" 取消 ")])]}}],null,!1,1770517635),model:{value:t.discardDialog,callback:function(e){t.discardDialog=e},expression:"discardDialog"}},[a("v-card",[a("v-card-title",{staticClass:"secondary--text"},[t._v("補充照片尚未完成")]),a("v-card-text",[t._v("放棄補充照片的話，你將遺失所有未新增的資料。下次需重新上傳照片")]),a("v-container",{staticClass:"text-center"},[a("v-btn",{attrs:{width:"100%","x-large":"",rounded:"",color:"primary"},on:{click:function(e){t.discardDialog=!1}}},[t._v("繼續編輯")]),a("a",{staticClass:"d-block mt-4",on:{click:t.cancelUpdateFactoryImages}},[t._v("確定放棄")])],1)],1)],1)],1):t._e(),t.appState.isEditImagesMode?a("image-upload-form",{attrs:{uploading:t.imageUploadState.uploading,error:t.imageUploadState.error,previewImages:t.uploadedImages,onClickRemoveImage:t.onClickRemoveImage,valid:t.imagesValid,submit:t.submitImageUpload,formState:t.imageUploadFormState,submitText:"確認新增照片",disableProgressiveUpload:""},model:{value:t.selectedImages,callback:function(e){t.selectedImages=e},expression:"selectedImages"}}):t.$vuetify.breakpoint.smAndDown?a("div",{staticClass:"update-factory-comment-container w-100 px-4 py-4 d-flex flex-column justify-between"},[a("div",[a("h3",{staticClass:"mt-4 mb-2 primary--text"},[t._v(t._s(t.updateFormTitle))]),t.appState.isEditComment?a("v-textarea",{attrs:{outlined:"",solo:"",placeholder:"例：常常散發異味"},model:{value:t.formState.others,callback:function(e){t.$set(t.formState,"others",e)},expression:"formState.others"}}):t._e(),t.appState.isEditName?a("v-text-field",{attrs:{outlined:"",placeholder:"例：小明化工廠",color:"primary"},model:{value:t.formState.name,callback:function(e){t.$set(t.formState,"name",e)},expression:"formState.name"}}):t._e(),t.appState.isEditType?a("v-select",{attrs:{items:t.factoryTypeItems,solo:"",outlined:"",placeholder:"未選擇"},model:{value:t.formState.factory_type,callback:function(e){t.$set(t.formState,"factory_type",e)},expression:"formState.factory_type"}}):t._e()],1),a("v-btn",{staticClass:"w-100 primary",staticStyle:{width:"100%","max-width":"345px",margin:"0 auto"},attrs:{"x-large":"",rounded:"",disabled:!t.isCurrentFieldValid},on:{click:t.submitUpdateFactory}},[t._v(" "+t._s(t.updateFormButton)+" ")])],1):t._e(),t.$vuetify.breakpoint.mdAndUp?a("v-dialog",{attrs:{persistent:"","max-width":"395"},model:{value:t.appState.isEditFactoryMode,callback:function(e){t.$set(t.appState,"isEditFactoryMode",e)},expression:"appState.isEditFactoryMode"}},[a("div",{staticClass:"update-factory-comment-modal w-100 px-4 py-4 d-flex flex-column justify-between"},[a("div",{staticClass:"d-flex justify-end"},[a("v-btn",{attrs:{icon:""},on:{click:t.cancelUpdateFactory}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("div",[a("h3",{staticClass:"mb-3"},[t._v(t._s(t.updateFormTitle))]),t.appState.isEditComment?a("v-textarea",{attrs:{outlined:"",solo:"",placeholder:"例：常常散發異味"},model:{value:t.formState.others,callback:function(e){t.$set(t.formState,"others",e)},expression:"formState.others"}}):t._e(),t.appState.isEditName?a("v-text-field",{attrs:{outlined:"",placeholder:"例：小明化工廠",color:"primary"},model:{value:t.formState.name,callback:function(e){t.$set(t.formState,"name",e)},expression:"formState.name"}}):t._e(),t.appState.isEditType?a("v-select",{attrs:{items:t.factoryTypeItems,solo:"",outlined:"",placeholder:"未選擇"},model:{value:t.formState.factory_type,callback:function(e){t.$set(t.formState,"factory_type",e)},expression:"formState.factory_type"}}):t._e()],1),a("v-btn",{staticClass:"w-100",staticStyle:{width:"100%","max-width":"345px",margin:"0 auto"},attrs:{"x-large":"",rounded:"",disabled:!t.isCurrentFieldValid,color:"primary"},on:{click:t.submitUpdateFactory}},[t._v(" "+t._s(t.updateFormButton)+" ")])],1)]):t._e()],1)},Wa=[],Ja=Object(l["b"])({name:"UpdateFactorySteps",components:{ImageUploadForm:wa},setup:function(){var t,e,a=this,n=Re(),o=Object(s["a"])(n,2),i=o[0],r=o[1].pageTransition,c=Te(),u=Object(s["a"])(c,2),d=u[1],m=Object(l["d"])(D,Object(l["j"])()),f=ke(),b=f.event,g=ma(),y=g.selectedImages,h=g.imageUploadState,_=g.uploadedImages,S=g.onClickRemoveImage,w=g.imageUploadFormValid,x=Object(l["i"])({nickname:"",contact:""}),C=Object(l["j"])(!1),O=Object(l["a"])((function(){return w.value&&!C.value})),k=function(){return Object(v["a"])(a,void 0,void 0,regeneratorRuntime.mark((function t(){var e,a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if((null===(e=i.factoryData)||void 0===e?void 0:e.id)&&y.value){t.next=2;break}return t.abrupt("return");case 2:return C.value=!0,t.prev=3,t.next=6,ye(null===(a=i.factoryData)||void 0===a?void 0:a.id,y.value,{nickname:x.nickname,contact:x.contact});case 6:n=t.sent,m.value&&(o=i.factoryData,o.images=o.images.concat(n),m.value.updateFactory(o.id,o),i.factoryData=o),r.cancelUpdateFactoryImages(),d.openUpdateFactoryImagesSuccessModal(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),console.error(t.t0);case 15:C.value=!1;case 16:case"end":return t.stop()}}),t,null,[[3,12]])})))},j=Object(l["j"])(!1),F=function(){j.value=!1,r.cancelUpdateFactoryImages()},I=function(){j.value=!1,r.cancelUpdateFactoryComment()},A=Object(l["i"])({others:"",name:null===(t=i.factoryData)||void 0===t?void 0:t.name,factory_type:null===(e=i.factoryData)||void 0===e?void 0:e.type,submitting:!1}),M=Object(p["a"])(dt),E={others:Object(l["a"])((function(){return A.others.length>0&&!A.submitting})),name:Object(l["a"])((function(){var t,e,a;return(null===(e=null===(t=A)||void 0===t?void 0:t.name)||void 0===e?void 0:e.length)&&(null===(a=A.name)||void 0===a?void 0:a.length)>0&&!A.submitting})),factory_type:Object(l["a"])((function(){return!!A.factory_type&&!A.submitting}))},T=Object(l["a"])((function(){var t=i.updateFactoryField;return E[t].value})),L=Object(l["a"])((function(){return i.isEditComment?"補充工廠描述":i.isEditName?"更改外部文字":"更改工廠類型"})),V=Object(l["a"])((function(){return i.isEditComment?"工廠描述":i.isEditName?"工廠外部文字":i.isEditType?"工廠類型":void 0})),U=Object(l["a"])((function(){return i.isEditComment?"新增工廠描述":i.isEditName?"確認更改工廠外部文字":i.isEditType?"確認更改工廠類型":void 0})),P=function(){return Object(v["a"])(a,void 0,void 0,regeneratorRuntime.mark((function t(){var e,a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if((null===(e=i.factoryData)||void 0===e?void 0:e.id)&&T.value){t.next=2;break}return t.abrupt("return");case 2:return A.submitting=!0,t.prev=3,n=i.updateFactoryField,b("updateFactory",{field:n}),t.next=8,_e(null===(a=i.factoryData)||void 0===a?void 0:a.id,Object(R["a"])({},n,A[n]));case 8:o=t.sent,m.value&&(m.value.updateFactory(o.id,o),i.factoryData=o),r.cancelUpdateFactoryComment(),d.openUpdateFactorySuccessModal(),t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](3);case 16:A.submitting=!1;case 17:case"end":return t.stop()}}),t,null,[[3,14]])})))};return{appState:i,pageTransition:r,discardDialog:j,imageUploadFormState:x,selectedImages:y,imageUploadState:h,uploadedImages:_,onClickRemoveImage:S,imagesValid:O,submitImageUpload:k,cancelUpdateFactoryImages:F,cancelUpdateFactory:I,updateFormAppTitle:L,updateFormTitle:V,updateFormButton:U,formState:A,isCurrentFieldValid:T,factoryTypeItems:M,submitUpdateFactory:P}}}),Xa=Ja,Ka=(a("9222"),Object(y["a"])(Xa,qa,Wa,!1,null,"4b0e00b8",null)),Qa=Ka.exports;Zt()(Ka,{VAppBar:Ra["a"],VBtn:qt["a"],VCard:Ga["a"],VCardText:Na["a"],VCardTitle:Na["b"],VContainer:ha["a"],VDialog:$a["a"],VIcon:Je["a"],VSelect:Ta["a"],VSpacer:za["a"],VTextField:_a["a"],VTextarea:La["a"],VToolbarTitle:Ya["a"]});var tn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.appState.formPageOpen,expression:"!appState.formPageOpen"}],staticClass:"factory-container",class:{full:t.full,desktop:t.$vuetify.breakpoint.mdAndUp,empty:!t.appState.factoryData},attrs:{elevation:"3"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.appState.factoryData,expression:"appState.factoryData"}],ref:"factoryDetailScrollerRef",staticClass:"factory-detail-scroller"},[t.scrollOff?a("v-app-bar",{staticClass:"d-block d-md-none",attrs:{fixed:"",color:"white"}},[a("v-spacer"),a("v-toolbar-title",[a("v-icon",{staticStyle:{"margin-bottom":"5px"},attrs:{color:t.statusColor}},[t._v("mdi-map-marker")]),t._v(t._s(t.factoryStatusText)+" ")],1),a("v-spacer"),a("div",{staticClass:"btn-container"},[a("v-icon",{staticClass:"float-right",on:{click:t.collapseFactoryDetail}},[t._v("mdi-close")]),a("v-icon",{staticClass:"float-right mr-4",on:{click:t.copyToClipboard}},[t._v("mdi-share-variant")])],1),t.showCopiedMessage?a("div",{staticClass:"copied-message flex justify-center align-items-center"},[a("v-icon",{staticClass:"mr-1",attrs:{color:"white"}},[t._v("mdi-content-copy")]),t._v(" 已複製連結 ")],1):t._e()],1):t._e(),a("v-card-text",[a("div",{staticClass:"d-flex justify-between align-items-center mb-3"},[a("span",{staticClass:"factory-status-title"},[t._v("工廠狀態")]),t.$vuetify.breakpoint.mdAndUp?a("v-btn",{attrs:{rounded:"",outlined:t.showCopiedMessage,color:t.showCopiedMessage?null:"white"},on:{click:t.copyToClipboard}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-share-variant")]),t._v(" "+t._s(t.showCopiedMessage?"已複製連結":"分享工廠")+" ")],1):a("span",[a("v-icon",{staticClass:"mr-4",on:{click:t.copyToClipboard}},[t._v("mdi-share-variant")]),a("v-icon",{on:{click:t.collapseFactoryDetail}},[t._v("mdi-close")])],1)],1),a("p",{staticClass:"factory-status secondary--text mb-2",staticStyle:{clear:"both"}},[a("v-icon",{staticStyle:{"margin-bottom":"5px"},attrs:{color:t.statusColor}},[t._v("mdi-map-marker")]),t._v(t._s(t.factoryStatusText)+" ")],1),a("p",{staticClass:"caption mb-0",staticStyle:{color:"#A1A1A1"}},[t._v(" 工廠編號 "+t._s(t.factoryId)+" "),a("br"),t._v(" 最後更新 2020/4/12 ")]),t.showCopiedMessage&&!t.scrollOff?a("div",{staticClass:"copied-message flex justify-center align-items-center"},[a("v-icon",{staticClass:"mr-1",attrs:{color:"white"}},[t._v("mdi-content-copy")]),t._v(" 已複製連結 ")],1):t._e()]),a("v-slide-group",{ref:"slideGroup",attrs:{"show-arrows":t.images>0&&"desktop"}},[a("v-slide-item",[a("div",{staticClass:"update-image-button d-flex flex-column justify-center align-items-center",on:{click:t.pageTransition.startUpdateFactoryImages}},[a("v-icon",{staticClass:"mb-1",attrs:{color:"white"}},[t._v("mdi-camera-plus")]),t._v(" 補充照片 ")],1)]),t._l(t.images,(function(t,e){return a("v-slide-item",{key:t.id,staticClass:"mr-4",class:{"ml-4":0===e}},[a("img",{staticClass:"factory-slide-image",attrs:{src:t.url}})])}))],2),a("div",{staticClass:"mt-4 mx-3 mb-2"},[a("h3",{staticClass:"mb-1"},[t._v("地段 / 地址")]),a("p",{staticClass:"mb-5",staticStyle:{"line-height":"1.3"}},[t._v(t._s(t.factoryAddressAndLandcode))]),t.full||t.$vuetify.breakpoint.mdAndUp?a("div",{staticClass:"mb-5"},[a("h3",{staticClass:"mb-1"},[t._v("經緯度")]),a("p",{staticClass:"mb-1"},[t._v(t._s(t.longitude)+", "+t._s(t.latitude))]),a("p",{staticClass:"text-caption"},[t._v("以上經緯度版本為 WGS84")])]):t._e(),t.full||t.$vuetify.breakpoint.mdAndUp?a("hr"):t._e(),t.full||t.$vuetify.breakpoint.mdAndUp?t._e():a("v-btn",{staticClass:"m-0 mb-0 px-0 v-btn-plain",attrs:{text:"",depressed:"",elevation:"0",ripple:!1,color:"#697F01"},on:{click:t.expandFactoryDetail}},[t._v(" 顯示更多資訊 "),a("v-icon",[t._v("mdi-menu-down")])],1),t.full||t.$vuetify.breakpoint.mdAndUp?a("div",{staticClass:"mt-4"},[a("h2",{staticClass:"mb-5"},[t._v("其他工廠資訊")]),a("h3",{staticClass:"mb-1"},[t._v("工廠外部文字")]),t.factoryName?a("p",{staticClass:"mb-3"},[t._v(t._s(t.factoryName))]):t._e(),a("v-btn",{staticClass:"d-block mb-5",attrs:{outlined:""},on:{click:function(e){return t.startUpdateFactoryCommentFor("name")}}},[t._v(" "+t._s(t.factoryName?"更改外部文字":"回報外部文字")+" ")]),a("h3",{staticClass:"mb-1"},[t._v("工廠類型")]),t.factoryType?a("p",{staticClass:"mb-3"},[t._v(t._s(t.factoryType))]):t._e(),a("v-btn",{staticClass:"d-block mb-5",attrs:{outlined:""},on:{click:function(e){return t.startUpdateFactoryCommentFor("factory_type")}}},[t._v(" "+t._s(t.factoryType?"更改工廠類型":"回報工廠類型")+" ")]),a("h3",{staticClass:"mb-1"},[t._v("工廠描述")]),a("v-btn",{staticClass:"mb-2",attrs:{outlined:""},on:{click:function(e){return t.startUpdateFactoryCommentFor("others")}}},[t._v("補充工廠描述")]),t._l(t.pastDescriptions,(function(e,n){return a("div",{key:n,staticClass:"mt-2",staticStyle:{"font-size":"14px"}},[a("p",{staticClass:"color-gray-light mb-1"},[t._v(t._s(e.date))]),a("p",{staticStyle:{"line-height":"24px"}},[t._v(t._s(e.others))])])}))],2):t._e()],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.appState.factoryData,expression:"!appState.factoryData"}],staticClass:"factory-detail-scroller px-4 py-5"},[a("h1",{staticClass:"secondary--text mb-5"},[t._v("請選擇一個地標")]),a("p",[t._v("請選擇一間工廠查看工廠詳細資訊。")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],staticClass:"sidebar-collapse-button d-flex align-items-center justify-center",on:{click:t.toggleFactoryDetail}},[a("v-icon",{attrs:{color:"primary"}},[t._v("mdi-menu-left")])],1)])},en=[],an=(a("4e827"),a("0d03"),a("f904")),nn=a.n(an),on=dt.reduce((function(t,e){return Object.assign(Object.assign({},t),Object(R["a"])({},e.value,e.text))}),{}),rn=function(t){return t.type?on[t.type]:null},cn=function(t){var e=Object(l["j"])(0),a=Object(l["j"])(0),n=function(){if(t.value){var n=t.value;e.value=n.scrollTop,a.value=n.scrollLeft}};return Object(l["k"])(t,(function(t){t&&(e.value=t.scrollTop,a.value=t.scrollLeft,t.addEventListener("scroll",n))})),Object(l["f"])((function(){t.value&&t.value.removeEventListener("scroll",n)})),{scrollTop:e,scrollLeft:a}},sn=cn,ln=Object(l["b"])({name:"FactoryDetailPage",setup:function(){var t,e=Re(),a=Object(s["a"])(e,2),n=a[0],o=a[1],i=o.pageTransition,r=o.expandFactoryDetail,c=o.collapseFactoryDetail,u=o.toggleFactoryDetail,d=Object(l["a"])((function(){return n.factoryData?n.factoryData.images:[]})),p=Object(l["a"])((function(){return n.factoryData?jt(n.factoryData):void 0})),m=Object(l["a"])((function(){return"undefined"!==typeof p.value?ft(p.value):""})),f=Object(l["a"])((function(){return"undefined"!==typeof p.value?kt(p.value):null})),b=Object(l["a"])((function(){return n.factoryData?n.factoryData.display_number:""})),g=Object(l["a"])((function(){return n.factoryData?rn(n.factoryData):null})),y=Object(l["a"])((function(){var t;return(null===(t=n.factoryData)||void 0===t?void 0:t.name)||""})),h=Object(l["a"])((function(){if(n.factoryData){var t=n.factoryData,e=t.townname,a=t.sectname,o=t.sectcode,i=t.landcode;return"".concat(e," ").concat(a," (").concat(o,") ").concat(i,"地號")}return""})),_=Object(l["a"])((function(){return n.factoryDetailsExpanded})),S=Object(l["a"])((function(){var t;return null===(t=n.factoryData)||void 0===t?void 0:t.lng.toFixed(7)})),w=Object(l["a"])((function(){var t;return null===(t=n.factoryData)||void 0===t?void 0:t.lat.toFixed(7)})),x=Object(l["j"])(null),C=sn(x),O=C.scrollTop,k=Object(l["a"])((function(){return O.value>29&&_.value})),j=Object(l["j"])(!1),F=function(){var t,e;if(n.factoryData){var a=window.location,o=a.host,i=a.protocol,r="".concat(i,"//").concat(o,"/#map=16/").concat(null===(t=n.factoryData)||void 0===t?void 0:t.lng,"/").concat(null===(e=n.factoryData)||void 0===e?void 0:e.lat);nn()(r),j.value=!0,window.setTimeout((function(){j.value=!1}),1e3)}},I=Object(l["j"])(null);Object(l["g"])((function(){var e;if(JSON.stringify(d.value)!==JSON.stringify(t))if(t){if(t=d.value.slice(),I.value){var a=null===(e=I.value)||void 0===e?void 0:e.$refs.content;window.setTimeout((function(){a.style="translateX(0px)"}),50)}}else t=d.value.slice()}));var A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"others";i.startUpdateFactoryComment(t)},M=Object(l["j"])([]);Object(l["k"])((function(){return n.factoryData}),(function(){var t=this;n.factoryData&&function(){Object(v["a"])(t,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Se(null===(e=n.factoryData)||void 0===e?void 0:e.id);case 2:M.value=t.sent;case 3:case"end":return t.stop()}}),t)})))}()}));var E=Object(l["a"])((function(){return M.value.sort((function(t,e){return new Date(e.created_at)>=new Date(t.created_at)?1:-1})).map((function(t){var e=new Date(t.created_at),a="".concat(e.getFullYear(),"/").concat(e.getMonth()+1,"/").concat(e.getDay());return{date:a,others:t.others}})).filter((function(t){return t.others}))}));return{full:_,appState:n,pageTransition:i,images:d,expandFactoryDetail:r,collapseFactoryDetail:c,toggleFactoryDetail:u,factoryStatus:p,factoryStatusText:m,statusColor:f,factoryId:b,factoryType:g,factoryName:y,factoryAddressAndLandcode:h,pastDescriptions:E,longitude:S,latitude:w,factoryDetailScrollerRef:x,scrollOff:k,showCopiedMessage:j,copyToClipboard:F,slideGroup:I,startUpdateFactoryCommentFor:A}}}),un=ln,dn=(a("9ec1"),a("7efd")),pn=a("9dbe"),vn=Object(y["a"])(un,tn,en,!1,null,"54c7c035",null),mn=vn.exports;Zt()(vn,{VAppBar:Ra["a"],VBtn:qt["a"],VCard:Ga["a"],VCardText:Na["a"],VIcon:Je["a"],VSlideGroup:dn["a"],VSlideItem:pn["a"],VSpacer:za["a"],VToolbarTitle:Ya["a"]});var fn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about-dialog-container"},[a("app-modal",{attrs:{open:t.open,dismiss:t.dismiss}},[a("div",{staticClass:"page"},[a("h3",[t._v("關於舉報系統")]),a("p",[t._v(" 農地違章工廠舉報系統為協助民眾回報揭露農地違章工廠資訊，並非實際完成舉報。 ")]),a("p",[t._v(" 地球公民基金會將整理資料進行部分案件追蹤，完成舉報者可於「已舉報」案件查見。 ")]),a("p",[t._v(" 105.05.20 前的違章工廠我們將持續收集資訊，但本系統優先針對新增建與中高污染違章工廠進行舉報。 ")]),a("p",[t._v(" 本系統感謝 g0v.tw 社群朋友共同開發。 ")]),a("p",[t._v(" 既有疑似違章工廠資料來源為 2019 年 7 月 30 日取自內政部國土測繪圖資雲"),a("a",{attrs:{href:"https://maps.nlsc.gov.tw/"}},[t._v("網站")]),t._v("。 ")]),a("p",[t._v(" 全站使用者貢獻資料以 "),a("a",{attrs:{href:"https://creativecommons.org/licenses/by/3.0/tw/"}},[t._v("CC BY 姓名標示 3.0")]),t._v(" 釋出，標註「© 農地違章工廠舉報小幫手貢獻者」，原始碼以 MIT 開放授權公開在 "),a("a",{attrs:{href:"https://github.com/Disfactory/Disfactory"}},[t._v("GitHub")]),t._v(" 上 ")])])])],1)},bn=[],gn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-modal-component",class:{open:t.open}},[a("div",{staticClass:"app-modal-backdrop",attrs:{"data-label":"modal-backdrop"},on:{click:t.dismiss}}),a("div",{staticClass:"app-modal"},[t.showCloseButton?a("div",{staticClass:"close",attrs:{"data-label":"modal-close"},on:{click:t.dismiss}}):t._e(),t._t("default")],2)])},yn=[],hn=Object(l["b"])({name:"AppModal",props:{open:{type:Boolean,default:!1},dismiss:{type:Function},showCloseButton:{type:Boolean,default:!0}}}),_n=hn,Sn=(a("07be"),Object(y["a"])(_n,gn,yn,!1,null,"4eec6d33",null)),wn=Sn.exports,xn=Object(l["b"])({name:"AboutModal",components:{AppModal:wn},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}}}),Cn=xn,On=(a("9769"),Object(y["a"])(Cn,fn,bn,!1,null,null,null)),kn=On.exports,jn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contact-modal-container"},[a("app-modal",{attrs:{open:t.open,dismiss:t.dismiss}},[a("div",{staticClass:"page"},[a("img",{attrs:{width:"137",src:"/images/cet-logo.png",alt:"Citizen of the Earth Taiwan"}}),a("h3",[t._v(" 有任何舉報相關問題"),a("br"),t._v(" 歡迎聯絡 ")]),a("p",[t._v(" 地球公民基金會"),a("br"),t._v(" TEL: 02-23920371"),a("br"),t._v(" Email: "),a("a",{attrs:{href:"mailto:cet@cet-taiwan.org"}},[t._v("cet@cet-taiwan.org")]),a("br")])])])],1)},Fn=[],In=Object(l["b"])({name:"ContactModal",components:{AppModal:wn},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}}}),An=In,Mn=(a("f3e5"),Object(y["a"])(An,jn,Fn,!1,null,null,null)),En=Mn.exports,Tn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"getting-started-container"},[a("app-modal",{attrs:{open:t.open,showCloseButton:!1,dismiss:t.dismiss}},[a("div",{staticClass:"page"},[a("h3",[t._v("嗨你好，歡迎來到農地違章工廠回報行動！")]),a("p",[t._v("需要大家協助回報以下資訊：")]),a("ul",[a("li",[t._v("中高污染工廠")]),a("li",[t._v("105.05.20 後新建的違章工廠")])]),a("p",[t._v("大家的回報會由地球公民基金會彙整追蹤後向政府舉報。")]),a("small",[t._v(" 行動前請同意資料貢獻"),a("a",{attrs:{href:"https://license.disfactory.tw/#%E8%BE%B2%E5%9C%B0%E9%81%95%E7%AB%A0%E5%B7%A5%E5%BB%A0%E5%9B%9E%E5%A0%B1%E7%B3%BB%E7%B5%B1%EF%BC%88disfactory%EF%BC%89%E8%B2%A2%E7%8D%BB%E5%8D%94%E8%AD%B0",target:"_blank"}},[t._v("授權條款")]),t._v("與"),a("a",{attrs:{href:"https://license.disfactory.tw/#%E9%9A%B1%E7%A7%81%E6%AC%8A%E6%A2%9D%E6%AC%BE",target:"_blank"}},[t._v("隱私條款")]),t._v("。本網站由"),a("a",{attrs:{href:"https://www.cet-taiwan.org/",target:"_blank"}},[t._v("地球公民基金會")]),t._v("與 "),a("a",{attrs:{href:"https://g0v.tw/",target:"_blank"}},[t._v("g0v.tw")]),t._v(" 社群共同開發。 ")]),a("app-button",{on:{click:t.agree}},[t._v("我同意加入回報")]),a("small",[a("a",{attrs:{href:"https://about.disfactory.tw"}},[t._v("我不同意，請帶我離開這個頁面")])])],1)])],1)},Ln=[],Dn=Object(l["b"])({name:"GettingStartedModal",components:{AppModal:wn,AppButton:_},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}},setup:function(t){return{agree:function(){localStorage.setItem("use-app","true"),t.dismiss&&t.dismiss()}}}}),Vn=Dn,Un=(a("d1c5"),Object(y["a"])(Vn,Tn,Ln,!1,null,null,null)),Pn=Un.exports,Bn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tutorial-modal-container"},[a("app-modal",{attrs:{open:t.open,dismiss:t.onDismissClick}},[t.isAdd||t.isUpdate?a("div",{staticClass:"back-button",on:{click:t.openHome}},[a("span"),a("span"),a("span")]):t._e(),a("div",{staticClass:"page"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isHome,expression:"isHome"}],attrs:{id:"tutorial-home"}},[a("h2",[t._v("使用說明")]),a("p",[t._v(" 如果系統無法讀取你的位置， 請至手機系統設定開啟位置權限。 ")]),a("div",{staticClass:"outline-button",on:{click:t.openAdd}},[t._v("如何新增一筆"),a("br"),t._v("違章工廠的資料？")]),a("div",{staticClass:"outline-button",on:{click:t.openUpdate}},[t._v("如何在一筆資料裡"),a("br"),t._v("補充更多資訊？")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isAdd,expression:"isAdd"}],attrs:{id:"tutorial-add-factory"}},[a("carousel",{ref:"createCarousel",attrs:{"per-page":1,paginationActiveColor:"#6E8501",paginationColor:"#e3e3e3",paginationPadding:5}},t._l(t.addImages,(function(e,n){return a("slide",{key:e},[a("h2",[t._v("新增違章工廠("+t._s(n+1)+"/7)")]),a("img",{attrs:{src:e}})])})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate,expression:"isUpdate"}],attrs:{id:"tutorial-update-factory"}},[a("carousel",{ref:"updateCarousel",attrs:{"per-page":1,paginationActiveColor:"#6E8501",paginationColor:"#e3e3e3",paginationPadding:5}},t._l(t.updateImages,(function(e,n){return a("slide",{key:e},[a("h2",[t._v("補充工廠資訊("+t._s(n+1)+"/4)")]),a("img",{attrs:{src:e}})])})),1)],1)])])],1)},Rn=[],Gn=(a("cb29"),a("0a63")),Nn=Object(l["b"])({name:"TutorialModal",components:{AppModal:wn,Carousel:Gn["Carousel"],Slide:Gn["Slide"]},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}},setup:function(t){var e=Object(l["j"])("home"),a=Object(l["a"])((function(){return"home"===e.value})),n=Object(l["a"])((function(){return"add"===e.value})),o=Object(l["a"])((function(){return"update"===e.value})),i=Object(l["j"])(null),r=Object(l["j"])(null),c=function(){e.value="home"},s=function(){i.value.goToPage(0),e.value="add"},u=function(){r.value.goToPage(0),e.value="update"},d=new Array(7).fill(!0).map((function(t,e){return"/images/tutorial/create-".concat(e+1,".jpg")})),p=new Array(4).fill(!0).map((function(t,e){return"/images/tutorial/update-".concat(e+1,".jpg")})),v=function(){c(),t.dismiss()};return{isHome:a,isAdd:n,isUpdate:o,openHome:c,openAdd:s,openUpdate:u,addImages:d,updateImages:p,onDismissClick:v,createCarousel:i,updateCarousel:r}}}),$n=Nn,zn=(a("1bed"),Object(y["a"])($n,Bn,Rn,!1,null,null,null)),Yn=zn.exports,Zn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",t._b({attrs:{"max-width":"350"},model:{value:t.safetyModalState,callback:function(e){t.safetyModalState=e},expression:"safetyModalState"}},"v-dialog",t.$attrs,!1),[a("div",{staticClass:"safety-modal"},[a("v-carousel",{attrs:{"progress-color":"#6E8501",light:"","hide-delimiter-background":"",progress:!1}},[a("v-card",[a("v-carousel-item",{staticClass:"page pa-3"},[a("h1",{staticClass:"mt-3 pb-1 mb-4"},[t._v("安全須知")]),a("p",[t._v(" 請參考以下建議，前往違章工廠拍照蒐證 ")])]),a("v-carousel-item",{staticClass:"page pa-3"},[a("img",{attrs:{src:"/images/safety_notice/1.png",alt:""}}),a("h2",[t._v(" 場勘 ")]),a("p",[t._v(" 假裝路過，檢查有無監視器；尋找適合拍照的隱蔽處 ")])]),a("v-carousel-item",{staticClass:"page pa-3"},[a("img",{attrs:{src:"/images/safety_notice/2.png",alt:""}}),a("h2",[t._v("藏身")]),a("p",[t._v(" 盡量避開監視器、他人視線；盡量在隱蔽處拍照（例如：車上、民宅內、樹叢間、遠方） ")])]),a("v-carousel-item",{staticClass:"page pa-3"},[a("img",{attrs:{src:"/images/safety_notice/3.png",alt:""}}),a("h2",[t._v("避嫌")]),a("p",[t._v("假如地點不夠隱密，請用手機拍照，降低他人戒心")])]),a("v-carousel-item",{staticClass:"page pa-3"},[a("img",{attrs:{src:"/images/safety_notice/4.png",alt:""}}),a("h2",[t._v("速離")]),a("p",[t._v("拍到1張清晰照片即可離去")])]),a("v-carousel-item",{staticClass:"page pa-3"},[a("img",{attrs:{src:"/images/safety_notice/5.png",alt:""}}),a("h2",[t._v("應變")]),a("p",[t._v("假如有人上前問話，請表現得「充滿好奇心」，試著跟對方聊天（例如：好奇水電師傅的施工技術），再伺機離開。")])])],1)],1)],1)])},Hn=[],qn=Object(l["b"])({name:"SafetyModal",props:{value:{required:!0,type:Boolean}},setup:function(t,e){var a=Object(l["a"])({get:function(){return t.value},set:function(t){return e.emit("input",t)}});return{safetyModalState:a}}}),Wn=qn,Jn=(a("0751"),a("5e66")),Xn=a("3e35"),Kn=Object(y["a"])(Wn,Zn,Hn,!1,null,null,null),Qn=Kn.exports;Zt()(Kn,{VCard:Ga["a"],VCarousel:Jn["a"],VCarouselItem:Xn["a"],VDialog:$a["a"]});var to=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-modal",{attrs:{open:t.open,dismiss:t.dismiss,showCloseButton:!1}},[a("h3",[t._v("感謝您新增資訊！")]),a("app-button",{attrs:{"data-label":"create-factory-success-close"},on:{click:t.dismiss}},[t._v("確認")])],1)},eo=[],ao=Object(l["b"])({name:"CreateFactorySuccessModal",components:{AppModal:wn,AppButton:_},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}}}),no=ao,oo=(a("b4fe"),Object(y["a"])(no,to,eo,!1,null,"f1cd472e",null)),io=oo.exports,ro=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-modal",{attrs:{open:t.open,dismiss:t.dismiss,showCloseButton:!1}},[a("h3",[t._v("感謝您補充資訊！")]),a("app-button",{attrs:{"data-label":"update-factory-success-apply"},on:{click:t.dismiss}},[t._v("確認")])],1)},co=[],so=Object(l["b"])({name:"UpdateFactorySuccessModal",components:{AppModal:wn,AppButton:_},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}}}),lo=so,uo=(a("979a"),Object(y["a"])(lo,ro,co,!1,null,"72bdbd76",null)),po=uo.exports,vo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ios-version-modal-container"},[a("app-modal",{attrs:{open:t.open,dismiss:t.dismiss}},[a("div",{staticClass:"page"},[a("h3",[t._v("⚠️你的手機無法新增可疑工廠")]),a("p",[t._v(" 很抱歉，你的 iPhone iOS 操作系統無法成功在本網站上傳照片。"),a("br"),t._v(" 請改用電腦新增可疑工廠照片或是至「系統設定」升級 iOS操作系統版本到至少 13.4 以上。瀏覽地圖功能則不受影響。 ")]),a("app-button",{on:{click:t.dismiss}},[t._v("知道了")])],1)])],1)},mo=[],fo=Object(l["b"])({name:"IosVersionModal",components:{AppModal:wn,AppButton:_},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}}}),bo=fo,go=(a("0b63"),Object(y["a"])(bo,vo,mo,!1,null,null,null)),yo=go.exports,ho=Object(l["b"])({name:"App",components:{Map:Ke,AppAlert:ua,AppButton:_,AppNavbar:k,AppSidebar:oa,AboutModal:kn,ContactModal:En,GettingStartedModal:Pn,SafetyModal:Qn,CreateFactorySuccessModal:io,UpdateFactorySuccessModal:po,TutorialModal:Yn,IosVersionModal:yo,CreateFactorySteps:Ha,UpdateFactorySteps:Qa,FactoryDetailPage:mn},setup:function(t,e){Oe(e),Ee(),Pe(),Ne(),Gt();var a=Te(),n=Object(s["a"])(a,2),o=n[0],i=n[1],r=Re(),c=Object(s["a"])(r,2),u=c[0],d=c[1],p=ze(),v=Object(s["a"])(p,2),m=v[0],f=v[1];Object(l["h"])(D,Object(l["j"])(null));var b=Object(l["j"])(!1);return{appState:u,alertState:m,alertActions:f,appActions:d,modalState:o,modalActions:i,drawer:b}}}),_o=ho,So=(a("5c0b"),a("7496")),wo=a("5bc1"),xo=a("1baa"),Co=a("f6c4"),Oo=a("f774"),ko=Object(y["a"])(_o,r,c,!1,null,null,null),jo=ko.exports;Zt()(ko,{VApp:So["a"],VAppBar:Ra["a"],VAppBarNavIcon:wo["a"],VBtn:qt["a"],VCard:Ga["a"],VCardText:Na["a"],VCardTitle:Na["b"],VDialog:$a["a"],VIcon:Je["a"],VList:Wt["a"],VListItem:Jt["a"],VListItemGroup:xo["a"],VListItemTitle:Xt["b"],VMain:Co["a"],VNavigationDrawer:Oo["a"],VSpacer:za["a"],VToolbarTitle:Ya["a"]});var Fo=a("9483");Object(Fo["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var Io=a("2bdd"),Ao=a.n(Io),Mo=a("f309"),Eo=a("fcf4");i["a"].use(Mo["a"]);var To=new Mo["a"]({theme:{themes:{light:{primary:"#697F01",secondary:"#364516",accent:Eo["a"].green.base}}}});i["a"].config.productionTip=!1,i["a"].use(l["c"]),i["a"].use(Ao.a,{config:{id:"UA-154739393-1"},enabled:!0}),new i["a"]({vuetify:To,render:function(t){return t(jo)}}).$mount("#app")},cf8e:function(t,e,a){},d10d:function(t,e,a){},d1c5:function(t,e,a){"use strict";var n=a("8271"),o=a.n(n);o.a},d3a7:function(t,e,a){},d773:function(t,e,a){"use strict";var n=a("cf8e"),o=a.n(n);o.a},dafd:function(t,e,a){"use strict";var n=a("c276"),o=a.n(n);o.a},e405:function(t,e,a){"use strict";var n=a("d3a7"),o=a.n(n);o.a},e556:function(t,e,a){},f3de:function(t,e,a){},f3e5:function(t,e,a){"use strict";var n=a("31aa"),o=a.n(n);o.a},f9b2:function(t,e,a){"use strict";var n=a("ac62"),o=a.n(n);o.a},fadf:function(t,e,a){}});
//# sourceMappingURL=app-legacy.d5b2e89e.js.map